import{r as g,j as e,u as q}from"./index-Cg1svvI5.js";import{B as A}from"./button-wtSf44PI.js";import"./input-j75cJiPX.js";import{A as F,C as O}from"./AdvancedSearchFilters-DOn551aH.js";import{B as I}from"./badge-CBZW5moz.js";import{C as B}from"./card-zq6uNjQt.js";import{D as G,a as J,b as V,c as z,d as H}from"./dialog-DPDbtzx5.js";import{A as P,C as K}from"./code-BNhHdEPQ.js";import{U as T}from"./user-ILiqHJuw.js";import{S as $}from"./sparkles-Dyii787z.js";import{S as M}from"./star-LF3yftrK.js";import{C as U}from"./clipboard-list-opgq6ab7.js";import{M as Q}from"./message-circle-DLBdOk2-.js";import{T as Y}from"./trending-up-CCayYKWv.js";import{C as R}from"./check-circle-2-CXExqBjZ.js";import{F as W}from"./file-text-90F8CKqb.js";import{L as X}from"./lightbulb-fCbQw0oy.js";import{g as Z}from"./photoUtils-CtZbZuPZ.js";import{A as ee}from"./arrow-left-B-1lI_0Z.js";import{F as se}from"./filter--n7jtOGJ.js";import{R as te}from"./refresh-cw-6zwt9GF_.js";import{B as ae}from"./briefcase-CLeWLoBs.js";import{M as ie}from"./map-pin-BJfi5_gX.js";import{C as re}from"./calendar-DPHLDLG9.js";import"./label-CXq0_ejY.js";import"./index-BktxQI8W.js";import"./checkbox-Bu_Ki7cn.js";import"./index-C8kEvNwS.js";import"./check-BqPiqVg8.js";import"./scroll-area-Bi4_-Llk.js";import"./separator-BC02zGbZ.js";import"./index-B1yRHtUD.js";import"./x-DYh5GfAr.js";import"./search-CuhLsibm.js";import"./clock-DSejQbFx.js";import"./graduation-cap-pOgUy3Jp.js";import"./building-2-DT6oWqg4.js";import"./users-CG471CR-.js";import"./save-Cveq6rNw.js";import"./chevron-down-CFyIgdDI.js";import"./index-BCrHabdb.js";function ne({candidate:s,open:r,onOpenChange:m}){const[t,d]=g.useState(null);if(g.useEffect(()=>{if(r&&(s!=null&&s.admin_report)){const n=s.admin_report;d({overallScore:n.overall_score||s.admin_score,softSkills:n.soft_skills_rating,technicalSkills:n.technical_skills_rating,communication:n.communication_rating,motivation:n.motivation_rating,summary:n.summary,strengths:n.strengths||[],recommendations:n.recommendations||[]})}},[r,s]),!s)return null;const o=s.full_name||`${s.first_name||""} ${s.last_name||""}`.trim()||"Candidat",x="#226D68";return e.jsx(G,{open:r,onOpenChange:m,children:e.jsx(J,{className:"max-w-2xl max-h-[90vh] overflow-y-auto p-0",children:e.jsxs("div",{className:"p-6",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-xl shadow-lg",children:e.jsx(P,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx(z,{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Avis de l'Expert"}),e.jsxs(H,{className:"text-base mt-1 flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-gray-500"}),"Évaluation détaillée de ",o]})]})]})}),t?e.jsxs("div",{className:"space-y-6 mt-6",children:[t.overallScore!==null&&t.overallScore!==void 0&&e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-50 via-purple-50 to-pink-50 rounded-xl p-6 border border-blue-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-200/30 to-purple-200/30 rounded-full -mr-16 -mt-16 blur-2xl"}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($,{className:"h-5 w-5 text-purple-600"}),e.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:"Score Global"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Évaluation globale du profil"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-1 bg-white/80 backdrop-blur-sm rounded-lg px-4 py-2 shadow-md",children:[e.jsx(M,{className:"h-7 w-7 fill-yellow-400 text-yellow-400 drop-shadow-sm"}),e.jsx("span",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:t.overallScore.toFixed(1)}),e.jsx("span",{className:"text-xl text-gray-500",children:"/5"})]})})]})]}),(t.technicalSkills!==null||t.softSkills!==null||t.communication!==null||t.motivation!==null)&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4",style:{color:x}}),"Notes détaillées"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.technicalSkills!==null&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(K,{className:"h-4 w-4",style:{color:x}}),e.jsx("h5",{className:"text-xs font-semibold text-gray-700",children:"Compétences Techniques"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"}),e.jsxs("span",{className:"text-xl font-bold text-gray-900",children:[t.technicalSkills.toFixed(1),"/5"]})]})]}),t.softSkills!==null&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(T,{className:"h-4 w-4 text-purple-600"}),e.jsx("h5",{className:"text-xs font-semibold text-gray-700",children:"Soft Skills"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"}),e.jsxs("span",{className:"text-xl font-bold text-gray-900",children:[t.softSkills.toFixed(1),"/5"]})]})]}),t.communication!==null&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Q,{className:"h-4 w-4",style:{color:x}}),e.jsx("h5",{className:"text-xs font-semibold text-gray-700",children:"Communication"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"}),e.jsxs("span",{className:"text-xl font-bold text-gray-900",children:[t.communication.toFixed(1),"/5"]})]})]}),t.motivation!==null&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Y,{className:"h-4 w-4",style:{color:"#e76f51"}}),e.jsx("h5",{className:"text-xs font-semibold text-gray-700",children:"Motivation"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"}),e.jsxs("span",{className:"text-xl font-bold text-gray-900",children:[t.motivation.toFixed(1),"/5"]})]})]})]})]}),t.strengths&&t.strengths.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4",style:{color:x}}),"Points forts"]}),e.jsx("div",{className:"space-y-2",children:t.strengths.map((n,i)=>e.jsxs("div",{className:"flex items-start gap-2 bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsx(R,{className:"h-4 w-4 mt-0.5 flex-shrink-0",style:{color:x}}),e.jsx("span",{className:"text-sm text-gray-700",children:n})]},i))})]}),t.summary&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4",style:{color:x}}),"Compte-rendu de l'Expert"]}),e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 border border-gray-200 shadow-sm",children:e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap leading-relaxed",children:t.summary})})]}),t.recommendations&&t.recommendations.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4 text-yellow-600"}),"Recommandations"]}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-5 border border-blue-200 shadow-sm",children:e.jsx("ul",{className:"space-y-2",children:t.recommendations.map((n,i)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx("span",{className:"text-yellow-600 mt-0.5",children:"•"}),e.jsx("span",{children:n})]},i))})})]})]}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(P,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"Aucune évaluation disponible pour ce candidat."})]})]})})})}const le=["Technologie & Informatique","Finance & Comptabilité","Marketing & Communication","Ressources Humaines","Commerce & Vente","Logistique & Supply Chain","Ingénierie & Technique","Santé & Social","Éducation & Formation","Juridique & Droit","Immobilier","Tourisme & Hôtellerie","Agriculture & Agroalimentaire","Énergie & Environnement","Design & Architecture","Consulting & Conseil","Média & Édition","Transport & Mobilité","Assurance","Banque & Finance"],oe=["Sophie","Jean","Marie","Pierre","Camille","Thomas","Léa","Nicolas","Julie","Antoine","Emma","Lucas","Clara","Hugo","Manon","Alexandre","Sarah","Maxime","Laura","Julien","Amélie","Romain","Pauline","Vincent","Amadou","Fatou","Ibrahima","Aissatou","Moussa","Kadiatou","Ousmane","Mariama","Youssef","Aicha","Mehdi","Nadia","Karim","Sanaa","Bilal","Zineb","David","Rachel","Michael","Sarah","Daniel","Esther","Jonathan","Rebecca"],ce=["Martin","Dupont","Bernard","Thomas","Petit","Robert","Richard","Durand","Dubois","Moreau","Laurent","Simon","Michel","Lefebvre","Leroy","Roux","David","Bertrand","Morel","Fournier","Girard","Bonnet","Dupuis","Lambert","Diallo","Traoré","Sall","Ndiaye","Ba","Diop","Fall","Kane","Benali","Alaoui","Bennani","Idrissi","Amrani","Bouazza","Cherkaoui","El Amrani","Cohen","Levy","Benhamou","Azoulay","Bensaid","Mekki","Hamdi","Khelifi"],me={"Technologie & Informatique":["Développeur Full-Stack","Développeur Frontend","Développeur Backend","Ingénieur DevOps","Data Scientist","Data Analyst","Architecte Solutions","Chef de Projet IT","Product Manager","Scrum Master","Développeur Mobile","Ingénieur Cloud","Cybersecurity Engineer","Machine Learning Engineer","QA Engineer","Tech Lead","CTO","Développeur Python","Développeur Java","Développeur JavaScript","DBA","Network Engineer"],"Finance & Comptabilité":["Comptable","Expert-Comptable","Contrôleur de Gestion","Analyste Financier","Directeur Financier","Trésorier","Auditeur","Conseiller Financier","Gestionnaire de Paie","Assistant Comptable","Responsable Comptable","Analyste Crédit","Gestionnaire de Portefeuille"],"Marketing & Communication":["Chef de Projet Marketing","Responsable Communication","Community Manager","Digital Marketing Manager","SEO Specialist","Content Manager","Brand Manager","Marketing Analyst","Public Relations Manager","Social Media Manager","Marketing Automation Specialist"],"Ressources Humaines":["Responsable RH","Recruteur","Gestionnaire de Paie","Formateur","Chargé de Recrutement","Responsable Formation","HR Business Partner","Talent Acquisition Specialist","Compensation & Benefits Manager"],"Commerce & Vente":["Commercial","Business Developer","Account Manager","Sales Manager","Key Account Manager","Chargé de Clientèle","Responsable Commercial","Business Analyst","Sales Representative","Trade Marketing Manager"],"Logistique & Supply Chain":["Responsable Logistique","Supply Chain Manager","Acheteur","Planificateur","Responsable Entrepôt","Logisticien","Transport Manager","Procurement Manager","Inventory Manager"],"Ingénierie & Technique":["Ingénieur Civil","Ingénieur Mécanique","Ingénieur Électrique","Ingénieur Industriel","Ingénieur Qualité","Ingénieur Process","Ingénieur R&D","Ingénieur Projet","Ingénieur Maintenance"],"Santé & Social":["Infirmier","Aide-soignant","Assistant Social","Éducateur Spécialisé","Psychologue","Kinésithérapeute","Ergothérapeute","Diététicien","Sage-femme","Ambulancier"],"Éducation & Formation":["Professeur","Formateur","Enseignant","Conseiller Pédagogique","Directeur d'École","Coordinateur Pédagogique","Animateur","Éducateur","Tuteur"],"Juridique & Droit":["Avocat","Juriste","Notaire","Huissier de Justice","Conseiller Juridique","Paralegal","Legal Advisor","Compliance Officer"],Immobilier:["Agent Immobilier","Gestionnaire de Patrimoine","Promoteur Immobilier","Expert Immobilier","Chargé de Clientèle Immobilier","Syndic"],"Tourisme & Hôtellerie":["Réceptionniste","Chef de Cuisine","Serveur","Directeur d'Hôtel","Guide Touristique","Responsable Événementiel","Concierge","Chef de Rang","Sommelier"],"Agriculture & Agroalimentaire":["Ingénieur Agronome","Technicien Agricole","Responsable Qualité Agroalimentaire","Chef de Production","Responsable R&D Agroalimentaire","Vétérinaire"],"Énergie & Environnement":["Ingénieur Énergies Renouvelables","Ingénieur Environnement","Technicien Énergie","Responsable QHSE","Ingénieur Électricité","Chargé de Mission Environnement"],"Design & Architecture":["Architecte","Designer UX/UI","Designer Graphique","Designer Produit","Architecte d'Intérieur","Designer Web","Illustrateur","Motion Designer"],"Consulting & Conseil":["Consultant","Senior Consultant","Manager Consulting","Conseil en Stratégie","Conseil en Organisation","Conseil en Transformation","Business Analyst"],"Média & Édition":["Journaliste","Rédacteur","Éditeur","Photographe","Vidéaste","Monteur Vidéo","Graphiste","Chef de Rubrique"],"Transport & Mobilité":["Chauffeur","Conducteur de Train","Pilote","Responsable Transport","Logisticien Transport","Dispatcher","Contrôleur"],Assurance:["Courtier en Assurance","Conseiller en Assurance","Expert en Sinistres","Responsable Commercial Assurance","Actuaire","Gestionnaire de Sinistres"],"Banque & Finance":["Conseiller Clientèle","Chargé d'Affaires","Analyste Crédit","Gestionnaire de Portefeuille","Trader","Compliance Officer","Responsable Agence","Conseiller en Gestion de Patrimoine"]},de={"Développeur Full-Stack":["React","Node.js","Python","TypeScript","PostgreSQL"],"Développeur Frontend":["React","Vue.js","Angular","TypeScript","CSS"],"Développeur Backend":["Node.js","Python","Java","PostgreSQL","MongoDB"],"Ingénieur DevOps":["Kubernetes","Docker","AWS","Terraform","Jenkins"],"Data Scientist":["Python","TensorFlow","SQL","Pandas","Machine Learning"],"Product Manager":["Product Strategy","Agile","Data Analysis","UX Research"],Comptable:["Sage","Excel","Comptabilité Générale","Fiscalité","Paie"],Commercial:["Vente","Négociation","CRM","Relation Client","Prospection"],"Chef de Projet":["Agile","Scrum","Project Management","Jira","Gestion d'équipe"],"Designer UX/UI":["Figma","User Research","Prototyping","Design Systems"],"Marketing Manager":["Marketing Digital","SEO","SEM","Social Media","Analytics"]},xe=["Abidjan, Côte d'Ivoire","Yamoussoukro, Côte d'Ivoire","Bouaké, Côte d'Ivoire","Daloa, Côte d'Ivoire","San-Pédro, Côte d'Ivoire","Korhogo, Côte d'Ivoire","Man, Côte d'Ivoire","Divo, Côte d'Ivoire","Gagnoa, Côte d'Ivoire","Abengourou, Côte d'Ivoire","Anyama, Côte d'Ivoire","Bingerville, Côte d'Ivoire","Grand-Bassam, Côte d'Ivoire","Jacqueville, Côte d'Ivoire","Tiassalé, Côte d'Ivoire","Agboville, Côte d'Ivoire","Adzopé, Côte d'Ivoire","Bondoukou, Côte d'Ivoire","Odienné, Côte d'Ivoire","Katiola, Côte d'Ivoire","Séguéla, Côte d'Ivoire","Bouaflé, Côte d'Ivoire","Sinfra, Côte d'Ivoire","Vavoua, Côte d'Ivoire","Zuénoula, Côte d'Ivoire","Oumé, Côte d'Ivoire","Issia, Côte d'Ivoire","Guiglo, Côte d'Ivoire","Toumodi, Côte d'Ivoire","Dimbokro, Côte d'Ivoire"],ue=["immediate","within_1_month","within_2_months","within_3_months","after_3_months"],E=(s,r)=>Math.floor(Math.random()*(r-s+1))+s,f=s=>s[E(0,s.length-1)],he=()=>{const s=Math.random();return s<.1?parseFloat((Math.random()*1.5+2.5).toFixed(1)):s<.3?parseFloat((Math.random()*.5+4).toFixed(1)):s<.7?parseFloat((Math.random()*.5+4.5).toFixed(1)):parseFloat((Math.random()*.3+4.7).toFixed(1))},pe=s=>{const r=de[s]||["Compétence 1","Compétence 2","Compétence 3"],m=["BEGINNER","INTERMEDIATE","ADVANCED","EXPERT"];return r.map(t=>({name:t,level:f(m)}))},L=(s,r,m,t)=>{const d=[`${r} avec ${m} ans d'expérience dans le secteur ${t}. Passionné(e) par l'excellence et l'innovation.`,`Professionnel(le) expérimenté(e) en ${r} avec ${m} ans d'expérience. Expertise reconnue dans ${t}.`,`${r} dynamique avec ${m} ans d'expérience. Spécialisé(e) dans ${t} avec une approche orientée résultats.`,`Expert(e) en ${r} avec ${m} ans d'expérience dans ${t}. Fort(e) de compétences techniques et relationnelles.`,`${r} avec ${m} ans d'expérience. Passionné(e) par ${t} et toujours en quête d'excellence professionnelle.`];return f(d)},ge=s=>{const r=parseFloat((s-.3+Math.random()*.6).toFixed(1)),m=parseFloat((s-.2+Math.random()*.4).toFixed(1)),t=parseFloat((s-.2+Math.random()*.4).toFixed(1)),d=parseFloat((s-.1+Math.random()*.2).toFixed(1)),o=["Expertise technique solide","Excellente communication","Leadership naturel","Autonomie et proactivité","Rigueur et organisation","Créativité et innovation","Esprit d'équipe","Adaptabilité"],x=["Idéal pour des projets complexes","Peut gérer des équipes","Excellent pour l'innovation","Très motivé et aligné","Peut former les juniors"];return{overall_score:s,technical_skills_rating:Math.min(5,Math.max(0,r)),soft_skills_rating:Math.min(5,Math.max(0,m)),communication_rating:Math.min(5,Math.max(0,t)),motivation_rating:Math.min(5,Math.max(0,d)),summary:`Candidat(e) avec un score global de ${s}/5. ${s>=4.5?"Excellent profil avec une expertise reconnue.":s>=4?"Très bon profil avec des compétences solides.":"Bon profil avec du potentiel."}`,strengths:[f(o),f(o),f(o)].filter((u,n,i)=>i.indexOf(u)===n),recommendations:[f(x),f(x)].filter((u,n,i)=>i.indexOf(u)===n)}},fe=s=>{const r=f(le),m=me[r]||["Professionnel"],t=f(m),d=f(oe),o=f(ce),x=`${d} ${o}`,u=E(0,20),n=he(),i=pe(t),w=["Communication","Leadership","Gestion de projet","Travail d'équipe","Analyse","Résolution de problèmes","Créativité","Adaptabilité"],h=Array.from({length:E(1,3)},()=>({name:f(w),level:f(["INTERMEDIATE","ADVANCED"])})),S=[...i,...h];return{candidate_id:s,first_name:d,last_name:o,full_name:x,title:t,main_job:t,profile_title:t,summary:L(d,t,u,r),summary_highlight:L(d,t,u,r).replace(new RegExp(`(${t}|${r})`,"gi"),"<mark>$1</mark>"),location:f(xe),years_of_experience:u,total_experience:u,availability:f(ue),admin_score:n,is_verified:!0,status:"VALIDATED",skills:S,sector:r,photo_url:null,admin_report:ge(n)}},b=Array.from({length:1200},(s,r)=>fe(r+1)),D=25;function ns(){const s=q(),[r,m]=g.useState(""),[t,d]=g.useState(!1),[o,x]=g.useState(1),[u,n]=g.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[i,w]=g.useState({sectors:[],main_jobs:[],min_experience:0,max_experience:null,min_admin_score:void 0,skills:[],contract_types:[],locations:[],experience_ranges:[],availability:[],education_levels:[],location:"",min_salary:null,max_salary:null,job_title:""});g.useEffect(()=>{(()=>{window.innerWidth<1024&&u&&n(!1)})()},[]);const h=g.useMemo(()=>{let a=[...b];if(r.trim()){const l=r.toLowerCase();a=a.filter(y=>y.full_name.toLowerCase().includes(l)||y.title.toLowerCase().includes(l)||y.summary.toLowerCase().includes(l)||y.skills.some(c=>c.name.toLowerCase().includes(l)))}return i.sectors.length>0&&(a=a.filter(l=>i.sectors.includes(l.sector))),i.min_experience>0&&(a=a.filter(l=>l.years_of_experience>=i.min_experience)),i.max_experience!==null&&(a=a.filter(l=>l.years_of_experience<=i.max_experience)),i.min_admin_score!==void 0&&i.min_admin_score>0&&(a=a.filter(l=>l.admin_score>=i.min_admin_score)),i.skills.length>0&&(a=a.filter(l=>i.skills.some(y=>l.skills.some(c=>c.name.toLowerCase().includes(y.toLowerCase()))))),i.availability.length>0&&(a=a.filter(l=>i.availability.includes(l.availability))),a},[r,i]),S=g.useMemo(()=>{const a=(o-1)*D,l=a+D;return h.slice(a,l)},[h,o]),C=Math.ceil(h.length/D);g.useEffect(()=>{x(1)},[r,i]);const k=a=>{w(a)},v=g.useCallback(()=>{d(!0),setTimeout(()=>{d(!1)},300)},[]),p=a=>{s(`/demo/candidates/${a}`)},j=g.useMemo(()=>{const a=[...new Set(b.map(c=>c.sector))],l=[...new Set(b.map(c=>c.main_job))],y=[...new Set(b.map(c=>c.location))];return{sectors:a.map(c=>({value:c,count:b.filter(_=>_.sector===c).length})),main_jobs:l.map(c=>({value:c,count:b.filter(_=>_.main_job===c).length})),locations:y.map(c=>({value:c,count:b.filter(_=>_.location===c).length})),contract_types:[{value:"CDI",count:Math.floor(b.length*.6)},{value:"CDD",count:Math.floor(b.length*.2)},{value:"FREELANCE",count:Math.floor(b.length*.15)},{value:"STAGE",count:Math.floor(b.length*.05)}]}},[]),N=()=>{let a=0;return r&&a++,i.job_title&&a++,i.skills.length>0&&(a+=i.skills.length),i.min_experience>0&&a++,i.max_experience&&a++,i.experience_ranges.length>0&&a++,i.availability.length>0&&a++,(i.min_salary||i.max_salary)&&a++,i.location&&a++,i.education_levels.length>0&&a++,i.min_admin_score&&a++,i.contract_types.length>0&&a++,i.sector&&a++,a};return e.jsxs("div",{className:"h-screen bg-gray-light flex flex-1 relative",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 z-40 bg-white border-b shadow-sm",children:e.jsxs("div",{className:"px-3 sm:px-4 py-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{variant:"ghost",size:"sm",onClick:()=>s("/"),className:"text-gray-700 h-8 px-2",children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx("div",{className:"h-5 w-px bg-gray-300"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-sm font-bold",children:[e.jsx("span",{style:{color:"#226D68"},children:"Yemma"}),e.jsx("span",{style:{color:"#e76f51"},children:"-Solutions"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Version Démo"})]})]}),e.jsxs(I,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-2 py-0.5 text-xs",children:[e.jsx($,{className:"h-3 w-3 mr-1"}),"Mode Démo"]})]})}),e.jsx("div",{className:`hidden lg:block ${u?"w-96":"w-0"} transition-all duration-300 overflow-hidden border-r border-gray-200 mt-12`,children:u&&e.jsx(F,{filters:i,facets:j,onFilterChange:k,onClose:()=>n(!1)})}),u&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden mt-12 animate-in fade-in duration-200",onClick:()=>n(!1)}),e.jsx("div",{className:"fixed inset-y-0 left-0 z-50 w-80 max-w-[90vw] sm:max-w-[85vw] bg-white shadow-xl lg:hidden transform transition-transform duration-300 ease-in-out overflow-hidden flex flex-col animate-in slide-in-from-left mt-12",children:e.jsx(F,{filters:i,facets:j,onFilterChange:k,onClose:()=>n(!1)})})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-w-0 mt-12",children:[e.jsx("div",{className:"bg-white border-b shadow-sm relative z-50",children:e.jsx("div",{className:"px-3 sm:px-4 md:px-6 py-3 md:py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 flex-1 min-w-0 overflow-hidden",children:[!u&&e.jsxs(A,{variant:"ghost",size:"sm",onClick:()=>n(!0),className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[e.jsx(se,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"hidden sm:inline",children:"Filtres"}),N()>0&&e.jsx(I,{variant:"secondary",className:"ml-1 flex-shrink-0",children:N()})]}),e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-anthracite font-heading truncate min-w-0",children:"CVthèque"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[e.jsxs(A,{variant:"ghost",size:"sm",onClick:()=>v(),disabled:t,className:"flex items-center gap-1 sm:gap-1.5 flex-shrink-0 px-1.5 sm:px-2 h-8",title:"Actualiser",children:[e.jsx(te,{className:`h-4 w-4 flex-shrink-0 ${t?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Actualiser"})]}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-600 whitespace-nowrap flex-shrink-0",children:h.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"hidden sm:inline",children:[h.length," candidat",h.length>1?"s":""," trouvé",h.length>1?"s":"",h.length>D&&e.jsxs("span",{className:"text-gray-500 ml-1",children:["(Page ",o,"/",C,")"]})]}),e.jsx("span",{className:"sm:hidden",children:h.length})]}):e.jsx("span",{children:"0 candidat"})})]})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-light",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 py-4 sm:py-6",children:t?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((a,l)=>e.jsx(O,{},l))}):h.length===0?e.jsx(B,{className:"p-8 sm:p-12 text-center",children:e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Aucun candidat trouvé"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4 mb-6",children:S.map(a=>e.jsx(ve,{candidate:a,onCandidateClick:p},a.candidate_id))}),h.length>D&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4 mt-6 sm:mt-8",children:[e.jsx(A,{variant:"outline",disabled:o===1,onClick:()=>x(o-1),className:"border-[#226D68] text-[#226D68] hover:bg-[#226D68]/10 w-full sm:w-auto",children:"Précédent"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs sm:text-sm text-gray-700",children:["Page ",o," de ",C]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",h.length," candidat",h.length>1?"s":"",")"]})]}),e.jsx(A,{variant:"outline",disabled:o>=C,onClick:()=>x(o+1),className:"border-[#226D68] text-[#226D68] hover:bg-[#226D68]/10 w-full sm:w-auto",children:"Suivant"})]})]})})})]})]})}function ve({candidate:s,onCandidateClick:r}){const[m,t]=g.useState(!1),d=s.full_name||`${s.first_name||""} ${s.last_name||""}`.trim()||"Candidat",o=Z(d),x=o,[u,n]=g.useState(!1),w=(()=>{const v=s.status==="VALIDATED"||s.is_verified===!0;let p=s.admin_score;if(v&&p!==null&&p!==void 0){const j=typeof p=="number"?p.toFixed(1):parseFloat(p).toFixed(1),N=typeof p=="number"?p:parseFloat(p)||0;return N>=4.5?{label:`${j}/5`,color:"bg-[#226D68]"}:N>=4?{label:`${j}/5`,color:"bg-blue-500"}:N>=3.5?{label:`${j}/5`,color:"bg-yellow-500"}:N>=2.5?{label:`${j}/5`,color:"bg-[#e76f51]"}:{label:`${j}/5`,color:"bg-red-500"}}return{label:"N/A",color:"bg-gray-500"}})(),S=!s.skills||s.skills.length===0?[]:s.skills.map(p=>typeof p=="object"?p.name:p).slice(0,3),C=s.total_experience||s.years_of_experience||0,k=()=>s.availability?{immediate:"Immédiate",within_1_month:"Dans moins de 1 mois",within_2_months:"Dans moins de 2 mois",within_3_months:"Dans moins de 3 mois",after_3_months:"Après 3 mois"}[s.availability]||s.availability:"Non spécifiée";return e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:e.jsx("div",{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"relative flex-shrink-0 flex items-center gap-3 sm:block",children:[e.jsx("img",{src:x,alt:d,className:"w-14 h-14 sm:w-16 sm:h-16 rounded-full object-cover border-2 border-gray-200",onError:v=>{v.target.src!==o&&(n(!0),v.target.src=o)},onLoad:()=>{u&&n(!1)}}),e.jsx("div",{className:`absolute -top-1 -right-1 sm:-top-1 sm:-right-1 ${w.color} text-white text-xs font-semibold px-1.5 py-0.5 rounded-full shadow-md`,children:w.label})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-3 lg:gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm sm:text-base text-gray-900 mb-1 truncate",children:d}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 font-medium mb-2 line-clamp-2",children:s.profile_title||s.title||s.main_job||"Non spécifié"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs text-gray-600 mb-2",children:[C>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5 flex-shrink-0"}),e.jsxs("span",{className:"whitespace-nowrap",children:[C," an",C>1?"s":""]})]}),s.location&&e.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[e.jsx(ie,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.location})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:k()})]})]}),S.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 mt-2",children:S.map((v,p)=>e.jsx(I,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs px-1.5 sm:px-2 py-0.5",children:v},p))})]}),e.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 flex-shrink-0 w-full sm:w-auto",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>r(s.candidate_id),className:"flex-1 sm:flex-none text-xs sm:text-sm font-medium transition-colors px-3 py-2 sm:py-1.5 border rounded whitespace-nowrap",style:{color:"#226D68",borderColor:"#226D68"},onMouseEnter:v=>{v.currentTarget.style.color="#1a5a55"},onMouseLeave:v=>{v.currentTarget.style.color="#226D68"},children:"Voir Profil"}),(s.admin_report&&Object.keys(s.admin_report||{}).length>0||s.admin_score!==null&&s.admin_score!==void 0)&&e.jsx("button",{onClick:()=>t(!0),className:"hidden md:flex text-xs sm:text-sm font-medium text-blue-deep hover:text-blue-deep/80 transition-colors border border-blue-deep rounded px-3 py-2 sm:py-1.5 whitespace-nowrap",children:"Avis expert"})]})})]})})]})})}),m&&e.jsx(ne,{candidate:s,open:m,onOpenChange:t})]})}export{ns as default};
