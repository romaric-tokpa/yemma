import{u as te,j as e,q as de,r as h,f as T,b as xe,s as pe,p as q}from"./index-Cg1svvI5.js";import{B as j}from"./button-wtSf44PI.js";import{C as x,d as L,a as E,b as G}from"./card-zq6uNjQt.js";import{B as u}from"./badge-CBZW5moz.js";import{T as he,a as ue,b as W,c as Q}from"./tabs-DacRyiUI.js";import{L as X}from"./lock-Dg7OYUIq.js";import{F as C}from"./file-text-90F8CKqb.js";import{I as fe}from"./image-DLPPg8Jg.js";import{F as ge}from"./file-CN3QZqU1.js";import{A as K}from"./arrow-left-B-1lI_0Z.js";import{R as be}from"./refresh-cw-6zwt9GF_.js";import{C as je}from"./check-circle-2-CXExqBjZ.js";import{S as w}from"./star-LF3yftrK.js";import{M as Ne}from"./map-pin-BJfi5_gX.js";import{B as Y}from"./briefcase-CLeWLoBs.js";import{C as J}from"./calendar-DPHLDLG9.js";import{G as Z}from"./globe-CSvequcl.js";import{M as ve}from"./mail-BoptD6uC.js";import{P as _e}from"./phone-Cc6lzcGm.js";import{D as ee}from"./download-jDX2n7X7.js";import{S as se}from"./sparkles-Dyii787z.js";import{G as ye}from"./graduation-cap-pOgUy3Jp.js";import{A as we,C as De}from"./code-BNhHdEPQ.js";import{B as Ee}from"./bar-chart-3-QVqyEmTL.js";import{U as Ce}from"./users-CG471CR-.js";import{W as ke}from"./wrench-wjBnEL4L.js";import{T as Ae}from"./target-C8kx_LMS.js";import{E as Te}from"./eye-C0B0xeRd.js";import"./index-C8kEvNwS.js";import"./index-BktxQI8W.js";import"./index-B1yRHtUD.js";import"./index-BCrHabdb.js";function Se({documents:l,subscription:c}){var N;const f=te(),b=((N=c==null?void 0:c.plan)==null?void 0:N.plan_type)==="FREEMIUM",s=()=>{f("/company/management?tab=subscription")},g=i=>i!=null&&i.includes("pdf")?e.jsx(C,{className:"h-8 w-8 text-red-500"}):i!=null&&i.includes("image")?e.jsx(fe,{className:"h-8 w-8 text-blue-500"}):e.jsx(ge,{className:"h-8 w-8 text-gray-500"});return b?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(X,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-yellow-900 mb-1",children:"Documents justificatifs verrouillés"}),e.jsx("p",{className:"text-xs text-yellow-700 mb-3",children:"Passez à un plan supérieur pour accéder aux documents justificatifs des candidats."}),e.jsx(j,{onClick:s,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",size:"sm",children:"S'abonner pour voir les preuves"})]})]})}),l&&l.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:l.map((i,p)=>{var k;return e.jsxs(x,{className:"relative overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-video bg-gray-200 flex items-center justify-center",children:(k=i.file_type)!=null&&k.includes("image")?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:i.url||i.file_url,alt:i.name||i.file_name||"Document",className:"w-full h-full object-cover blur-md filter",style:{filter:"blur(20px)"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g(i.file_type)})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:g(i.file_type)})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(X,{className:"h-8 w-8 text-white mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-white font-medium",children:"Verrouillé"})]})})]}),e.jsxs("div",{className:"p-3 border-t",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 truncate",children:i.name||i.file_name||"Document"}),i.document_type&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:i.document_type.replace("_"," ")})]})]},i.id||p)})})]}):null}const Ie=(l,c)=>{const f=`${(l==null?void 0:l[0])||""}${(c==null?void 0:c[0])||""}`.toUpperCase()||"U";return`https://ui-avatars.com/api/?name=${encodeURIComponent(f)}&size=200&background=random&color=fff&bold=true`},Fe=l=>`https://ui-avatars.com/api/?name=${encodeURIComponent(l||"Company")}&size=100&background=random&color=fff&bold=true`,Le=l=>{if(!l)return null;const c=[];return l.overall_score!==void 0&&c.push(l.overall_score),l.technical_skills_rating!==void 0&&c.push(l.technical_skills_rating),l.soft_skills_rating!==void 0&&c.push(l.soft_skills_rating),l.communication_rating!==void 0&&c.push(l.communication_rating),l.motivation_rating!==void 0&&c.push(l.motivation_rating),c.length===0?null:(c.reduce((b,s)=>b+s,0)/c.length).toFixed(1)};function us(){var P,B,z,V,H;const{candidateId:l}=de(),c=te(),[f,b]=h.useState(!0),[s,g]=h.useState(null),[N,i]=h.useState([]),[p,k]=h.useState(null),[Re,ae]=h.useState(!1),[Me,re]=h.useState(null),[S,I]=h.useState(!1),[A,F]=h.useState(null);h.useEffect(()=>{le(),R(),M()},[l]),h.useEffect(()=>{if(s!=null&&s.photo_url){let t=s.photo_url;if(t&&t.startsWith("/")){const a=t.match(/\/api\/v1\/documents\/serve\/(\d+)/);if(a&&a[1]){const d=parseInt(a[1]);t=T.getDocumentServeUrl(d)}}t&&!t.includes("ui-avatars.com")&&t.trim()!==""?(F(t),I(!1)):F(null)}else F(null)},[s==null?void 0:s.photo_url]);const le=async()=>{try{const t=await xe.getCurrentUser();t.company_id&&(re(t.company_id),ne(t.company_id))}catch(t){console.error("Error loading user:",t)}},R=async()=>{var a,d,o,v,_,n;const t=parseInt(l,10);if(isNaN(t)||t<=0){console.error("Invalid candidate ID:",l),g(null),b(!1);return}try{b(!0),console.log("Loading candidate profile for ID:",t);const r=await pe.getCandidateProfile(t);if(console.log("Candidate profile loaded:",r),console.log("Admin report present:",!!r.admin_report,r.admin_report),g(r),r.id&&(!r.experiences||!r.educations||!r.certifications||!r.skills))try{console.warn("Relations manquantes dans la réponse du service search")}catch(m){console.error("Error loading relations:",m)}}catch(r){console.error("Error loading candidate:",r),console.error("Error details:",{message:r.message,status:(a=r.response)==null?void 0:a.status,statusText:(d=r.response)==null?void 0:d.statusText,data:(o=r.response)==null?void 0:o.data,candidateId:t}),((v=r.response)==null?void 0:v.status)===404?(console.warn(`Candidate ${t} not found (404)`),g(null)):((_=r.response)==null?void 0:_.status)===403?(console.warn(`Access forbidden for candidate ${t} (403)`),g(null)):(console.warn(`Failed to load candidate ${t}:`,((n=r.response)==null?void 0:n.status)||r.message),g(null))}finally{b(!1)}},M=async()=>{try{const d=(await T.getCandidateDocuments(l)||[]).filter(o=>!o.deleted_at).filter(o=>{var n;if(o.document_type==="PROFILE_PHOTO"||o.document_type==="COMPANY_LOGO")return!1;const v=(n=o.mime_type)==null?void 0:n.startsWith("image/"),_=o.document_type==="OTHER";return!(v&&_)});i(d)}catch(t){console.error("Error loading documents:",t),i([])}},ne=async t=>{if(t)try{const a=await q.getSubscription(t);k(a);const d=await q.checkQuota(t);ae(d.allowed)}catch(a){console.error("Error loading subscription:",a)}},ie=async()=>{var t;if(!p||!((t=p.plan)!=null&&t.document_access)){alert("L'accès aux documents nécessite un abonnement Enterprise.");return}alert("Téléchargement du dossier complet...")};if(f)return e.jsx("div",{className:"flex items-center justify-center h-screen bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Chargement du profil candidat..."})]})});if(!s)return e.jsx("div",{className:"flex items-center justify-center h-screen bg-background",children:e.jsxs("div",{className:"text-center max-w-md p-6",children:[e.jsx(C,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground opacity-50"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Candidat non trouvé"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Le profil candidat que vous recherchez n'existe pas ou n'est plus disponible."}),e.jsxs(j,{onClick:()=>c("/company/search"),children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Retour à la recherche"]})]})});const $=`${s.first_name||""} ${s.last_name||""}`.trim()||"Candidat",D=Ie(s.first_name,s.last_name),ce=A&&!S&&!A.includes("ui-avatars.com")?A:D,oe=((P=p==null?void 0:p.plan)==null?void 0:P.document_access)===!0,me=[s.city,s.country].filter(Boolean).join(", ")||"Non spécifié",O=Le(s.admin_report),U=(B=s.admin_report)==null?void 0:B.overall_score;return e.jsxs("div",{className:"min-h-screen bg-gray-light",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#226D68] to-[#1a5a55] text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 py-4 sm:py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsxs(j,{variant:"ghost",onClick:()=>c("/company/search"),className:"text-white hover:bg-white/10 w-full sm:w-auto justify-start sm:justify-center",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Retour à la recherche"]}),e.jsxs(j,{variant:"ghost",onClick:()=>{R(),M()},className:"text-white hover:bg-white/10 w-full sm:w-auto justify-start sm:justify-center",disabled:f,children:[e.jsx(be,{className:`h-4 w-4 mr-2 ${f?"animate-spin":""}`}),"Actualiser"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:gap-6 md:gap-8",children:[e.jsx("div",{className:"flex-shrink-0 relative self-center sm:self-start",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ce,alt:$,className:"w-32 h-32 sm:w-36 sm:h-36 md:w-40 md:h-40 rounded-full object-cover border-4 border-white/30 shadow-xl",onError:t=>{!S&&t.target.src!==D?(I(!0),t.target.src=D):t.target.src!==D&&(t.target.src=D)},onLoad:()=>{S&&A&&I(!1)}}),s.status==="VALIDATED"&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-white rounded-full p-1 sm:p-1.5 shadow-lg z-10",children:e.jsx(je,{className:"h-4 w-4 sm:h-5 sm:w-5 text-[#226D68]"})}),(U||O)&&e.jsxs("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-[#e76f51] text-white rounded-full px-2 sm:px-3 py-1 sm:py-1.5 shadow-xl flex items-center gap-1 sm:gap-1.5 border-2 border-white z-10",children:[e.jsx(w,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5 fill-current"}),e.jsxs("span",{className:"text-xs sm:text-sm font-bold whitespace-nowrap",children:[U||O,"/5"]})]})]})}),e.jsxs("div",{className:"flex-1 text-white text-center sm:text-left w-full sm:w-auto",children:[e.jsx("div",{className:"flex items-center justify-center sm:justify-start gap-3 mb-3 flex-wrap",children:e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold font-heading text-white truncate",children:$})}),s.profile_title&&e.jsx("p",{className:"text-base sm:text-lg md:text-xl text-white/90 mb-4 sm:mb-6 font-medium",children:s.profile_title}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[e.jsx(Ne,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:me})]}),s.total_experience!==void 0&&e.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[e.jsx(Y,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("span",{children:[s.total_experience," an",s.total_experience>1?"s":""," d'expérience"]})]}),((z=s.job_preferences)==null?void 0:z.availability)&&e.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[e.jsx(J,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("span",{children:["Disponibilité: ",s.job_preferences.availability]})]}),((V=s.job_preferences)==null?void 0:V.mobility)&&e.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[e.jsx(Z,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("span",{children:["Mobilité: ",s.job_preferences.mobility]})]}),s.email&&e.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[e.jsx(ve,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[e.jsx(_e,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:s.phone})]})]}),oe&&e.jsxs(j,{onClick:ie,className:"bg-white text-[#226D68] hover:bg-white/90 w-full sm:w-auto text-sm sm:text-base",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Télécharger le dossier"]})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 py-4 sm:py-6 md:py-8",children:[(s==null?void 0:s.admin_report)&&Object.keys(s.admin_report).length>0&&e.jsxs(x,{className:"mb-6 sm:mb-8 border-l-4 border-l-[#226D68] shadow-lg bg-gradient-to-r from-white to-[#226D68]/5",children:[e.jsx(L,{className:"pb-3 sm:pb-4 p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-[#226D68]/10 rounded-lg flex-shrink-0",children:e.jsx(se,{className:"h-5 w-5 sm:h-6 sm:w-6 text-[#226D68]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-anthracite font-heading",children:"Avis de l'Expert"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Évaluation professionnelle du profil"})]})]})}),e.jsxs(E,{className:"pt-0 p-4 sm:p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-4 sm:mb-6",children:[s.admin_report.overall_score!==void 0&&e.jsxs("div",{className:"bg-gradient-to-br from-[#226D68]/10 to-[#226D68]/5 rounded-lg p-4 border border-[#226D68]/20",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2 font-medium",children:"Note globale"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((t,a)=>e.jsx(w,{className:`h-5 w-5 ${a<Math.round(s.admin_report.overall_score)?"text-yellow-500 fill-current":"text-gray-300"}`},a))}),e.jsxs("span",{className:"ml-2 font-bold text-xl text-gray-anthracite",children:[s.admin_report.overall_score.toFixed(1),"/5"]})]})]}),s.admin_report.technical_skills_rating!==void 0&&e.jsxs("div",{className:"bg-blue-deep/5 rounded-lg p-4 border border-blue-deep/20",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2 font-medium",children:"Compétences techniques"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((t,a)=>e.jsx(w,{className:`h-5 w-5 ${a<s.admin_report.technical_skills_rating?"text-yellow-500 fill-current":"text-gray-300"}`},a))}),e.jsxs("span",{className:"ml-2 font-bold text-lg text-gray-anthracite",children:[s.admin_report.technical_skills_rating,"/5"]})]})]}),s.admin_report.soft_skills_rating!==void 0&&e.jsxs("div",{className:"bg-blue-deep/5 rounded-lg p-4 border border-blue-deep/20",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2 font-medium",children:"Compétences comportementales"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((t,a)=>e.jsx(w,{className:`h-5 w-5 ${a<s.admin_report.soft_skills_rating?"text-yellow-500 fill-current":"text-gray-300"}`},a))}),e.jsxs("span",{className:"ml-2 font-bold text-lg text-gray-anthracite",children:[s.admin_report.soft_skills_rating,"/5"]})]})]}),s.admin_report.communication_rating!==void 0&&e.jsxs("div",{className:"bg-blue-deep/5 rounded-lg p-4 border border-blue-deep/20",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2 font-medium",children:"Communication"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((t,a)=>e.jsx(w,{className:`h-5 w-5 ${a<s.admin_report.communication_rating?"text-yellow-500 fill-current":"text-gray-300"}`},a))}),e.jsxs("span",{className:"ml-2 font-bold text-lg text-gray-anthracite",children:[s.admin_report.communication_rating,"/5"]})]})]}),s.admin_report.motivation_rating!==void 0&&e.jsxs("div",{className:"bg-blue-deep/5 rounded-lg p-4 border border-blue-deep/20",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2 font-medium",children:"Motivation"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((t,a)=>e.jsx(w,{className:`h-5 w-5 ${a<s.admin_report.motivation_rating?"text-yellow-500 fill-current":"text-gray-300"}`},a))}),e.jsxs("span",{className:"ml-2 font-bold text-lg text-gray-anthracite",children:[s.admin_report.motivation_rating,"/5"]})]})]})]}),s.admin_report.soft_skills_tags&&s.admin_report.soft_skills_tags.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Tags de compétences comportementales"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.admin_report.soft_skills_tags.map((t,a)=>e.jsx(u,{variant:"secondary",className:"bg-[#226D68]/10 text-[#226D68] border-[#226D68]/20",children:t},a))})]}),s.admin_report.summary&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-anthracite mb-2",children:"Résumé de l'évaluation"}),e.jsx("p",{className:"text-foreground whitespace-pre-wrap leading-relaxed",children:s.admin_report.summary})]}),(s.admin_report.interview_notes||s.admin_report.recommendations)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6 pt-6 border-t border-border",children:[s.admin_report.interview_notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-anthracite mb-2",children:"Notes d'entretien"}),e.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap leading-relaxed",children:s.admin_report.interview_notes})]}),s.admin_report.recommendations&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-anthracite mb-2",children:"Recommandations"}),e.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap leading-relaxed",children:s.admin_report.recommendations})]})]})]})]}),e.jsxs(he,{defaultValue:"profile",className:"w-full",children:[e.jsx("div",{className:"overflow-x-auto -mx-3 sm:mx-0 px-3 sm:px-0",children:e.jsxs(ue,{className:"bg-white mb-4 sm:mb-6 inline-flex w-full sm:w-auto min-w-max sm:min-w-0",children:[e.jsx(W,{value:"profile",className:"data-[state=active]:bg-[#226D68] data-[state=active]:text-white text-xs sm:text-sm px-4 sm:px-6 py-2 sm:py-2.5 whitespace-nowrap",children:"Profil complet"}),e.jsx(W,{value:"documents",className:"data-[state=active]:bg-[#226D68] data-[state=active]:text-white text-xs sm:text-sm px-4 sm:px-6 py-2 sm:py-2.5 whitespace-nowrap",children:"Documents"})]})}),e.jsxs(Q,{value:"profile",className:"mt-4 sm:mt-6 space-y-4 sm:space-y-6",children:[s.professional_summary&&e.jsxs(x,{className:"p-4 sm:p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-anthracite font-heading",children:"Résumé professionnel"}),e.jsx("p",{className:"text-sm sm:text-base text-foreground whitespace-pre-wrap leading-relaxed",children:s.professional_summary})]}),e.jsxs(x,{className:"p-4 sm:p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-anthracite font-heading",children:"Informations personnelles"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4",children:[s.date_of_birth&&e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2 mb-1",children:[e.jsx(J,{className:"h-4 w-4"}),"Date de naissance"]}),e.jsx("p",{className:"text-sm",children:new Date(s.date_of_birth).toLocaleDateString("fr-FR")})]}),s.nationality&&e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2 mb-1",children:[e.jsx(Z,{className:"h-4 w-4"}),"Nationalité"]}),e.jsx("p",{className:"text-sm",children:s.nationality})]}),s.sector&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Secteur"}),e.jsx("p",{className:"text-sm",children:s.sector})]}),s.main_job&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Métier principal"}),e.jsx("p",{className:"text-sm",children:s.main_job})]}),s.address&&e.jsxs("div",{className:"col-span-2 md:col-span-3",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Adresse"}),e.jsx("p",{className:"text-sm",children:s.address})]})]})]}),s.experiences&&s.experiences.length>0&&e.jsxs(x,{className:"p-4 sm:p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6 flex items-center gap-2 text-gray-anthracite font-heading",children:[e.jsx(Y,{className:"h-5 w-5 sm:h-6 sm:w-6 text-[#226D68] flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Expériences professionnelles"})]}),e.jsx("div",{className:"space-y-4 sm:space-y-6",children:s.experiences.map(t=>{const a=Fe(t.company_name),d=t.company_logo_url||a;return e.jsxs("div",{className:"border-l-4 border-l-[#226D68] pl-4 sm:pl-6 pb-4 sm:pb-6 last:pb-0 relative",children:[e.jsx("div",{className:"absolute -left-2 top-0 w-3 h-3 sm:w-4 sm:h-4 bg-[#226D68] rounded-full border-2 border-white"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-3 sm:gap-4",children:[e.jsx("img",{src:d,alt:t.company_name,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-lg object-cover border-2 border-primary/20 flex-shrink-0 shadow-sm self-center sm:self-start",onError:o=>{o.target.src!==a&&(o.target.src=a)}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-base sm:text-lg text-gray-anthracite mb-1 truncate",children:t.position}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground font-medium mb-2 truncate",children:t.company_name}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground mb-3",children:[new Date(t.start_date).toLocaleDateString("fr-FR",{month:"long",year:"numeric"}),t.end_date?` - ${new Date(t.end_date).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}`:t.is_current?" - Actuellement":""]}),t.description&&e.jsx("div",{className:"text-foreground mt-3 text-sm rich-text-content leading-relaxed",dangerouslySetInnerHTML:{__html:t.description}}),t.achievements&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[e.jsx("h5",{className:"text-sm font-semibold mb-2 text-gray-anthracite",children:"Réalisations majeures :"}),e.jsx("div",{className:"text-foreground text-sm rich-text-content leading-relaxed",dangerouslySetInnerHTML:{__html:t.achievements}})]})]})]})]},t.id)})})]}),s.educations&&s.educations.length>0&&e.jsxs(x,{className:"p-4 sm:p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6 flex items-center gap-2 text-gray-anthracite font-heading",children:[e.jsx(ye,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-deep flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Formations"})]}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:s.educations.map(t=>e.jsxs("div",{className:"border-l-4 border-l-blue-deep pl-3 sm:pl-4 py-2",children:[e.jsx("h4",{className:"font-semibold text-sm sm:text-base text-gray-anthracite truncate",children:t.diploma}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:t.institution}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[t.start_year&&`${t.start_year} - `,t.graduation_year]}),t.level&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground hidden sm:inline",children:"•"}),e.jsx(u,{variant:"outline",className:"border-blue-deep text-blue-deep text-xs",children:t.level})]})]})]},t.id))})]}),s.certifications&&s.certifications.length>0&&e.jsxs(x,{className:"p-4 sm:p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6 flex items-center gap-2 text-gray-anthracite font-heading",children:[e.jsx(we,{className:"h-5 w-5 sm:h-6 sm:w-6 text-gold-soft flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Certifications"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.certifications.map(t=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow bg-white",children:[e.jsx("h4",{className:"font-semibold text-gray-anthracite mb-1",children:t.title}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:[t.issuer," • ",t.year]}),t.verification_url&&e.jsx("a",{href:t.verification_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-[#226D68] hover:underline mt-2 inline-block font-medium",children:"Vérifier"}),t.expiration_date&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Expire le: ",new Date(t.expiration_date).toLocaleDateString("fr-FR")]})]},t.id))})]}),s.skills&&s.skills.length>0&&e.jsxs(x,{className:"rounded-lg shadow-sm border-l-4 border-l-[#226D68]",children:[e.jsx(L,{className:"py-2.5 px-4 border-b bg-gradient-to-r from-[#226D68]/5 to-transparent",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-[#226D68]"}),e.jsxs(G,{className:"text-base font-semibold text-gray-900",children:["Compétences",e.jsxs("span",{className:"ml-2 text-xs font-normal text-gray-600",children:["(",s.skills.length,")"]})]})]})}),e.jsx(E,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"space-y-3",children:[(()=>{const t=s.skills.filter(a=>a.skill_type==="TECHNICAL");return t.length===0?null:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx(De,{className:"h-3.5 w-3.5 text-blue-600"}),e.jsxs("h4",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:["Techniques (",t.length,")"]})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.map(a=>e.jsxs(u,{variant:"secondary",className:"bg-blue-50 text-blue-900 border-blue-200 text-xs px-2 py-1 font-medium",children:[a.name,a.level&&e.jsxs("span",{className:"ml-1.5 text-blue-700 font-normal",children:["• ",a.level==="BEGINNER"?"Débutant":a.level==="INTERMEDIATE"?"Int.":a.level==="ADVANCED"?"Avancé":a.level==="EXPERT"?"Expert":a.level]}),a.years_of_practice>0&&e.jsxs("span",{className:"ml-1.5 text-blue-600 font-normal",children:["(",a.years_of_practice,"an",a.years_of_practice>1?"s":"",")"]})]},a.id))})]})})(),(()=>{const t=s.skills.filter(a=>a.skill_type==="SOFT");return t.length===0?null:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx(Ce,{className:"h-3.5 w-3.5 text-[#226D68]"}),e.jsxs("h4",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:["Soft Skills (",t.length,")"]})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.map(a=>e.jsxs(u,{variant:"outline",className:"bg-[#E8F4F3] text-[#1a5a55] border-[#B8DDD9] text-xs px-2 py-1 font-medium",children:[e.jsx(se,{className:"h-3 w-3 inline mr-1 text-[#226D68]"}),a.name]},a.id))})]})})(),(()=>{const t=s.skills.filter(a=>a.skill_type==="TOOL");return t.length===0?null:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx(ke,{className:"h-3.5 w-3.5 text-purple-600"}),e.jsxs("h4",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:["Outils (",t.length,")"]})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.map(a=>e.jsxs(u,{variant:"secondary",className:"bg-purple-50 text-purple-900 border-purple-200 text-xs px-2 py-1 font-medium",children:[a.name,a.level&&e.jsxs("span",{className:"ml-1.5 text-purple-700 font-normal",children:["• ",a.level==="BEGINNER"?"Débutant":a.level==="INTERMEDIATE"?"Int.":a.level==="ADVANCED"?"Avancé":a.level==="EXPERT"?"Expert":a.level]}),a.years_of_practice>0&&e.jsxs("span",{className:"ml-1.5 text-purple-600 font-normal",children:["(",a.years_of_practice,"an",a.years_of_practice>1?"s":"",")"]})]},a.id))})]})})()]})})]}),s.job_preferences&&e.jsxs(x,{className:"p-4 sm:p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6 flex items-center gap-2 text-gray-anthracite font-heading",children:[e.jsx(Ae,{className:"h-5 w-5 sm:h-6 sm:w-6 text-[#226D68] flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Recherche d'emploi"})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.job_preferences.desired_positions&&s.job_preferences.desired_positions.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-semibold text-gray-anthracite mb-2 sm:mb-3 block",children:"Postes recherchés"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:s.job_preferences.desired_positions.map((t,a)=>e.jsx(u,{className:"bg-[#226D68]/10 text-[#226D68] border-[#226D68]/20 text-xs",children:t},a))})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4",children:[s.job_preferences.contract_type&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-1 block",children:"Type de contrat"}),e.jsx("p",{className:"text-sm",children:s.job_preferences.contract_type})]}),s.job_preferences.desired_location&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-1 block",children:"Localisation souhaitée"}),e.jsx("p",{className:"text-sm",children:s.job_preferences.desired_location})]}),s.job_preferences.availability&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-1 block",children:"Disponibilité"}),e.jsx("p",{className:"text-sm",children:s.job_preferences.availability})]}),(s.job_preferences.salary_min||s.job_preferences.salary_max||s.job_preferences.salary_expectations)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-1 block",children:"Prétentions salariales"}),e.jsx("p",{className:"text-sm",children:s.job_preferences.salary_min&&s.job_preferences.salary_max?`${(s.job_preferences.salary_min/1e3).toFixed(0)}k - ${(s.job_preferences.salary_max/1e3).toFixed(0)}k FCFA/mois`:s.job_preferences.salary_expectations?`${(s.job_preferences.salary_expectations/1e3).toFixed(0)}k FCFA/mois`:"Non spécifié"})]}),s.job_preferences.mobility&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-1 block",children:"Mobilité"}),e.jsx("p",{className:"text-sm",children:s.job_preferences.mobility})]}),s.job_preferences.target_sectors&&s.job_preferences.target_sectors.length>0&&e.jsxs("div",{className:"col-span-2 md:col-span-3",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-anthracite mb-3 block",children:"Secteurs ciblés"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.job_preferences.target_sectors.map((t,a)=>e.jsx(u,{variant:"outline",className:"border-blue-deep text-blue-deep",children:t},a))})]})]})]})]})]}),e.jsx(Q,{value:"documents",className:"mt-4 sm:mt-6",children:N.length>0?e.jsx(e.Fragment,{children:((H=p==null?void 0:p.plan)==null?void 0:H.plan_type)==="FREEMIUM"?e.jsx(Se,{documents:N,subscription:p}):e.jsxs(x,{className:"rounded-[12px] shadow-lg border-l-4 border-l-blue-deep",children:[e.jsx(L,{className:"bg-gradient-to-r from-blue-deep/5 to-blue-deep/10 border-b py-2 px-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(G,{className:"flex items-center gap-2 text-xs sm:text-sm font-semibold",children:[e.jsx(C,{className:"h-4 w-4 text-blue-deep flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Documents justificatifs"})]})})}),e.jsx(E,{className:"p-3 sm:p-4",children:e.jsx("div",{className:"space-y-2 sm:space-y-3",children:N.map(t=>{const a=n=>({CV:"Curriculum Vitae",ATTESTATION:"Attestation",CERTIFICATE:"Certificat",RECOMMENDATION_LETTER:"Lettre de recommandation",DIPLOMA:"Diplôme",OTHER:"Autre"})[n]||n,d=n=>({CV:"bg-blue-100 text-blue-800 border-blue-200",ATTESTATION:"bg-[#D1E9E7] text-[#1a5a55] border-[#B8DDD9]",CERTIFICATE:"bg-[#FBE5E0] text-[#c04a2f] border-[#F8D3CA]",RECOMMENDATION_LETTER:"bg-purple-100 text-purple-800 border-purple-200",DIPLOMA:"bg-indigo-100 text-indigo-800 border-indigo-200",OTHER:"bg-gray-100 text-gray-800 border-gray-200"})[n]||"bg-gray-100 text-gray-800 border-gray-200",o=n=>n?n<1024?`${n} B`:n<1048576?`${(n/1024).toFixed(1)} KB`:`${(n/1024/1024).toFixed(1)} MB`:"0 B",v=async()=>{var n,r;try{const m=T.getDocumentServeUrl(t.id);window.open(m,"_blank")}catch(m){console.error("Error viewing document:",m),alert("Erreur lors de l'ouverture du document: "+(((r=(n=m.response)==null?void 0:n.data)==null?void 0:r.detail)||m.message))}},_=async()=>{var n,r;try{const m=T.getDocumentServeUrl(t.id),y=document.createElement("a");y.href=m,y.download=t.original_filename||`document_${t.id}`,y.target="_blank",document.body.appendChild(y),y.click(),document.body.removeChild(y)}catch(m){console.error("Error downloading document:",m),alert("Erreur lors du téléchargement du document: "+(((r=(n=m.response)==null?void 0:n.data)==null?void 0:r.detail)||m.message))}};return e.jsx(x,{className:"rounded-lg shadow-sm hover:shadow-md transition-all border-l-2 border-l-blue-deep/50 group",children:e.jsx(E,{className:"pt-3 pb-3 px-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(C,{className:"h-4 w-4 text-blue-deep flex-shrink-0"}),e.jsx("h4",{className:"font-semibold text-sm text-gray-anthracite truncate",children:t.original_filename}),e.jsx(u,{className:`text-xs px-1.5 py-0 h-4 ${d(t.document_type)}`,children:a(t.document_type)})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[e.jsx("span",{children:o(t.file_size)}),e.jsx("span",{children:"•"}),e.jsx("span",{children:t.mime_type}),(t.created_at||t.uploaded_at)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(t.created_at||t.uploaded_at).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})})]}),t.status&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx(u,{variant:t.status==="uploaded"?"secondary":"outline",className:"text-xs px-1.5 py-0 h-4",children:t.status==="uploaded"?"Téléchargé":t.status})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[e.jsxs(j,{variant:"ghost",size:"sm",onClick:v,className:"h-7 px-2 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(Te,{className:"h-3.5 w-3.5 mr-1"}),"Voir"]}),e.jsxs(j,{variant:"ghost",size:"sm",onClick:_,className:"h-7 px-2 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(ee,{className:"h-3.5 w-3.5 mr-1"}),"Télécharger"]})]})]})})},t.id)})})})]})}):e.jsx(x,{className:"rounded-[12px] shadow-lg border-l-4 border-l-blue-deep",children:e.jsx(E,{className:"p-3",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(C,{className:"h-8 w-8 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm font-semibold mb-1",children:"Aucun document enregistré"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Les documents sont ajoutés lors de l'onboarding"})]})})})})]})]})]})}export{us as default};
