import{u as K,r as l,f as I,s as ee,j as e,a as se,d as L,p as te,b as ae}from"./index-Ck9agymx.js";import re from"./CompanyManagement-8hpihjl-.js";import{b as Q,g as le}from"./photoUtils-CtZbZuPZ.js";import{B as N}from"./button-DZcKRNoB.js";import{B}from"./badge-d_jsyM3e.js";import{C as S,d as T,b as F,c as G,a as M}from"./card-CYQnxe6u.js";import"./input-96zCdkwo.js";import"./label-DtEBgE9a.js";import"./separator-Cfxu3oip.js";import{A as H,C as ie}from"./AdvancedSearchFilters-DJyfsAxB.js";import{E as ne}from"./ExpertReviewDialog-DIR5FegI.js";import{F as oe}from"./filter--eIoGZl3.js";import{R as ce}from"./refresh-cw-Byuopc_o.js";import{B as me}from"./briefcase-CT2QWnq1.js";import{M as Y}from"./map-pin-B1B63hcQ.js";import{C as de}from"./calendar-CZDzAiGe.js";import{D as xe}from"./download-BTCgaKeK.js";import{M as he}from"./mail-D8UCKYj-.js";import{S as pe}from"./star-CDfOzIsz.js";import{L as ue}from"./loader-2-p7aSMtdV.js";import{B as fe}from"./building-5AwgBSTz.js";import{X as ge}from"./x-Cz2KeVw7.js";import{M as be}from"./menu-D2siLRdl.js";import{H as je}from"./home-C2JdX8LM.js";import{S as W}from"./search-CDKuCsQd.js";import{S as O}from"./settings-DJfNWHek.js";import{L as ve}from"./log-out-qTLnz3So.js";import{U as Ne}from"./users-Dh9X2qGB.js";import{C as ye}from"./check-circle-2-DmS9kAcz.js";import{C as we}from"./credit-card-CmA255YU.js";import{T as _e}from"./trending-up-DvnND5FW.js";import{F as Ce}from"./file-text-CdKvYQ5p.js";import{S as Se}from"./sparkles-BqiII6Qp.js";import{U as ke}from"./user-plus-CFseWbNm.js";import"./tabs-CbRA7ell.js";import"./index-D-KbNHMy.js";import"./index-CoHPqngH.js";import"./index-2c3-_iOm.js";import"./index-Cd3GS59Z.js";import"./types-VK2oKv9X.js";import"./dialog-QRXHv6pJ.js";import"./shield-DnUKo__h.js";import"./user-BHb0lJ3D.js";import"./clock-m15TQ7zd.js";import"./trash-2-mgVJLnvx.js";import"./zap-DIECt_mE.js";import"./check-DdakOmnO.js";import"./checkbox-Df-MxScW.js";import"./scroll-area-BVgyqau8.js";import"./graduation-cap-NZxSs8SU.js";import"./code-Bpmgmv5Z.js";import"./building-2-8oagQ1Ji.js";import"./save-b2cA9qZ7.js";import"./chevron-down-DAlZXzre.js";import"./clipboard-list-CCmpOTsQ.js";import"./message-circle-BB5SutOG.js";import"./lightbulb-DUo8bR0O.js";const Ee=s=>{var d;const m=s.split(" ").filter(Boolean);return m.length>=2?`${m[0][0]}${m[m.length-1][0]}`.toUpperCase():(((d=m[0])==null?void 0:d[0])||"C").toUpperCase()},X="yemma_search_filters",De=()=>{try{const s=localStorage.getItem(X);if(s)return JSON.parse(s)}catch(s){console.error("Error loading filters from storage:",s)}return null},J=(s,m)=>{try{localStorage.setItem(X,JSON.stringify({filters:s,query:m}))}catch(d){console.error("Error saving filters to storage:",d)}},Ae=25;function Te(){const s=K(),[m,d]=l.useState(!1),[k,n]=l.useState([]),[u,f]=l.useState(0),[x,D]=l.useState(1),[_]=l.useState(Ae),[A,z]=l.useState({}),o=De(),C={job_title:"",skills:[],min_experience:0,max_experience:null,experience_ranges:[],availability:[],salary_min:null,salary_max:null,location:"",education_levels:[],min_admin_score:null,contract_types:[],sector:"",languages:{}},[j,P]=l.useState((o==null?void 0:o.query)||""),[t,c]=l.useState((o==null?void 0:o.filters)||C),[h,p]=l.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0);l.useEffect(()=>{(()=>{window.innerWidth<1024&&h&&p(!1)})();const i=()=>{};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const b=l.useCallback(async a=>{const i={},R=a.filter(w=>!w.photo_url||!Q(w.photo_url,I));if(R.length===0)return;console.log(`SearchTab: Loading photos for ${R.length} candidates without photo_url`);const $=R.slice(0,20).map(async w=>{try{const q=(await I.getCandidateDocuments(w.candidate_id)).filter(E=>(E.document_type==="PROFILE_PHOTO"||E.document_type==="OTHER")&&!E.deleted_at).sort((E,Z)=>new Date(Z.created_at)-new Date(E.created_at))[0];if(q){const E=I.getDocumentServeUrl(q.id);i[w.candidate_id]=E,console.log(`SearchTab: Found photo for candidate ${w.candidate_id}:`,E)}}catch(V){console.warn(`SearchTab: Error loading photo for candidate ${w.candidate_id}:`,V)}});await Promise.all($),z(w=>({...w,...i}))},[]),y=l.useCallback(async()=>{var a;d(!0);try{const i={query:j||void 0,job_title:t.job_title||void 0,skills:((a=t.skills)==null?void 0:a.length)>0?t.skills:void 0,min_experience:t.min_experience>0?t.min_experience:void 0,max_experience:t.max_experience||void 0,location:t.location||void 0,availability:t.availability&&t.availability.length>0?t.availability:void 0,education_levels:t.education_levels&&t.education_levels.length>0?t.education_levels:void 0,min_admin_score:t.min_admin_score||void 0,contract_types:t.contract_types&&t.contract_types.length>0?t.contract_types:void 0,sector:t.sector||void 0,min_salary:t.min_salary||void 0,max_salary:t.max_salary||void 0,page:x,size:_},R=await ee.postSearch(i),$=R.results||[];n($),f(R.total||0),$.length>0&&b($).catch(w=>{console.warn("SearchTab: Error loading profile photos:",w)})}catch(i){console.error("Search error:",i),n([]),f(0)}finally{d(!1)}},[j,t,x,_,b]);l.useEffect(()=>{const a=setTimeout(()=>{y()},300);return()=>clearTimeout(a)},[j,t,x,y]),l.useEffect(()=>{const a=setInterval(()=>{y()},3e4);return()=>clearInterval(a)},[y]),l.useEffect(()=>{J(t,j)},[t,j]);const r=a=>{c(a),D(1),J(a,j)},v=a=>{if(!a){console.error("Candidate ID is missing");return}const i=typeof a=="number"?a:parseInt(a,10);if(isNaN(i)||i<=0){console.error("Invalid candidate ID:",a);return}s(`/candidates/${i}`)},g=()=>{let a=0;return j&&a++,t.job_title&&a++,t.skills.length>0&&(a+=t.skills.length),t.min_experience>0&&a++,t.max_experience&&a++,t.experience_ranges.length>0&&a++,t.availability.length>0&&a++,(t.salary_min||t.salary_max)&&a++,t.location&&a++,t.education_levels.length>0&&a++,t.min_admin_score&&a++,t.contract_types.length>0&&a++,t.sector&&a++,a};return e.jsxs("div",{className:"h-full bg-gray-light flex flex-1 relative",children:[e.jsx("div",{className:`hidden lg:block ${h?"w-96":"w-0"} transition-all duration-300 overflow-hidden border-r border-gray-200`,children:h&&e.jsx(H,{filters:t,facets:{},onFilterChange:r,onClose:()=>p(!1)})}),h&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden animate-in fade-in duration-200",onClick:()=>p(!1)}),e.jsx("div",{className:"fixed inset-y-0 left-0 z-50 w-80 max-w-[90vw] sm:max-w-[85vw] bg-white shadow-xl lg:hidden transform transition-transform duration-300 ease-in-out overflow-hidden flex flex-col animate-in slide-in-from-left",children:e.jsx(H,{filters:t,facets:{},onFilterChange:r,onClose:()=>p(!1)})})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-w-0",children:[e.jsx("div",{className:"bg-white border-b shadow-sm",children:e.jsx("div",{className:"px-3 sm:px-4 md:px-6 py-3 md:py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-1 min-w-0",children:[!h&&e.jsxs(N,{variant:"ghost",size:"sm",onClick:()=>p(!0),className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Filtres"}),g()>0&&e.jsx(B,{variant:"secondary",className:"ml-1",children:g()})]}),e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-anthracite font-heading truncate",children:"CVthèque"})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-shrink-0",children:[e.jsxs(N,{variant:"ghost",size:"sm",onClick:()=>y(),disabled:m,className:"flex items-center gap-2",children:[e.jsx(ce,{className:`h-4 w-4 ${m?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Actualiser"})]}),e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:[u>0&&e.jsxs("span",{className:"hidden sm:inline",children:[u," candidat",u>1?"s":""," trouvé",u>1?"s":""]}),e.jsx("span",{className:"sm:hidden",children:u})]})]})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-light",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 py-4 sm:py-6",children:m?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((a,i)=>e.jsx(ie,{},i))}):k.length===0?e.jsx(S,{className:"p-8 sm:p-12 text-center",children:e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Aucun candidat trouvé"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4 mb-6",children:k.map(a=>e.jsx(Fe,{candidate:a,onCandidateClick:v,profilePhotos:A},a.candidate_id))}),u>_&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4 mt-6 sm:mt-8",children:[e.jsx(N,{variant:"outline",disabled:x===1,onClick:()=>D(x-1),className:"border-blue-deep text-blue-deep hover:bg-blue-deep/10 w-full sm:w-auto",children:"Précédent"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-xs sm:text-sm text-gray-700",children:["Page ",x," de ",Math.ceil(u/_)]})}),e.jsx(N,{variant:"outline",disabled:x>=Math.ceil(u/_),onClick:()=>D(x+1),className:"border-blue-deep text-blue-deep hover:bg-blue-deep/10 w-full sm:w-auto",children:"Suivant"})]})]})})})]})]})}function Fe({candidate:s,onCandidateClick:m,profilePhotos:d={}}){const[k,n]=l.useState(!1),u=s.full_name||`${s.first_name||""} ${s.last_name||""}`.trim()||"Candidat";Ee(u);const f=le(u);let x=Q(s.photo_url,I);!x&&d[s.candidate_id]&&(x=d[s.candidate_id]);const D=x||f,[_,A]=l.useState(!1);l.useEffect(()=>{(s.photo_url||d[s.candidate_id])&&A(!1)},[s.photo_url,d,s.candidate_id]);const o=(()=>{var b,y;const c=s.status||"VALIDATED",h=c==="VALIDATED"||s.is_verified===!0;let p=null;if(s.admin_score!==null&&s.admin_score!==void 0?p=s.admin_score:((b=s.admin_report)==null?void 0:b.overall_score)!==null&&((y=s.admin_report)==null?void 0:y.overall_score)!==void 0&&(p=s.admin_report.overall_score),h){if(p!=null){const r=typeof p=="number"?p.toFixed(1):parseFloat(p).toFixed(1),v=typeof p=="number"?p:parseFloat(p)||0;return v>=4.5?{label:`${r}/5`,color:"bg-[#226D68]"}:v>=4?{label:`${r}/5`,color:"bg-blue-500"}:v>=3.5?{label:`${r}/5`,color:"bg-yellow-500"}:v>=2.5?{label:`${r}/5`,color:"bg-[#e76f51]"}:{label:`${r}/5`,color:"bg-red-500"}}return{label:"N/A",color:"bg-gray-500"}}return c==="SUBMITTED"||c==="IN_REVIEW"?{label:"En validation",color:"bg-yellow-500"}:{label:"Nouveau",color:"bg-gray-500"}})(),j=!s.skills||s.skills.length===0?[]:s.skills.map(h=>typeof h=="object"?h.name:h).slice(0,3),P=s.total_experience||s.years_of_experience||0,t=()=>s.availability?{immediate:"Immédiate",within_1_month:"Dans moins de 1 mois",within_2_months:"Dans moins de 2 mois",within_3_months:"Dans moins de 3 mois",after_3_months:"Après 3 mois"}[s.availability]||s.availability:"Non spécifiée";return e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:e.jsx("div",{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"relative flex-shrink-0 flex items-center gap-3 sm:block",children:[e.jsx("img",{src:D,alt:u,className:"w-14 h-14 sm:w-16 sm:h-16 rounded-full object-cover border-2 border-gray-200",onError:c=>{c.target.src!==f&&(console.warn("SearchTab: Photo failed to load for candidate",s.candidate_id,"URL was:",c.target.src),A(!0),c.target.src=f)},onLoad:()=>{_&&A(!1)}},`${s.candidate_id}-${x||"default"}`),e.jsx("div",{className:`absolute -top-1 -right-1 sm:-top-1 sm:-right-1 ${o.color} text-white text-xs font-semibold px-1.5 py-0.5 rounded-full shadow-md`,children:o.label})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-3 lg:gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm sm:text-base text-gray-900 mb-1 truncate",children:u}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 font-medium mb-2 line-clamp-2",children:s.profile_title||s.title||s.main_job||"Non spécifié"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs text-gray-600 mb-2",children:[P>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(me,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5 flex-shrink-0"}),e.jsxs("span",{className:"whitespace-nowrap",children:[P," an",P>1?"s":""]})]}),s.location&&e.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[e.jsx(Y,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.location})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:t()})]})]}),j.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 mt-2",children:j.map((c,h)=>e.jsx(B,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs px-1.5 sm:px-2 py-0.5",children:c},h))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 flex-shrink-0 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>m(s.candidate_id),className:"flex-1 sm:flex-none text-xs sm:text-sm font-medium transition-colors px-3 py-2 sm:py-1.5 border rounded whitespace-nowrap",style:{color:"#226D68",borderColor:"#226D68"},onMouseEnter:c=>{c.currentTarget.style.color="#1a5a55"},onMouseLeave:c=>{c.currentTarget.style.color="#226D68"},children:"Voir Profil"}),(s.admin_report&&Object.keys(s.admin_report).length>0||s.admin_score!==null&&s.admin_score!==void 0)&&e.jsx("button",{onClick:()=>n(!0),className:"hidden md:flex text-xs sm:text-sm font-medium text-blue-deep hover:text-blue-deep/80 transition-colors border border-blue-deep rounded px-3 py-2 sm:py-1.5 whitespace-nowrap",children:"Avis expert"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 justify-between sm:justify-start",children:[(s.admin_report&&Object.keys(s.admin_report).length>0||s.admin_score!==null&&s.admin_score!==void 0)&&e.jsx("button",{onClick:()=>n(!0),className:"md:hidden flex-1 text-xs font-medium text-blue-deep hover:text-blue-deep/80 transition-colors border border-blue-deep rounded px-2 py-1.5 whitespace-nowrap",children:"Avis expert"}),e.jsx("button",{className:"p-2 text-gray-600 hover:text-blue-deep hover:bg-gray-50 rounded transition-colors",title:"Télécharger CV","aria-label":"Télécharger CV",children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-600 hover:text-blue-deep hover:bg-gray-50 rounded transition-colors",title:"Envoyer un email","aria-label":"Envoyer un email",children:e.jsx(he,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-600 hover:text-yellow-500 hover:bg-gray-50 rounded transition-colors",title:"Ajouter aux favoris","aria-label":"Ajouter aux favoris",children:e.jsx(pe,{className:"h-4 w-4"})})]})]})]})})]})})}),k&&e.jsx(ne,{candidate:s,open:k,onOpenChange:n})]})}const U=s=>{const m=(s==null?void 0:s.split(" ").map(d=>d[0]).join("").toUpperCase().slice(0,2))||"CO";return`https://ui-avatars.com/api/?name=${encodeURIComponent(m)}&size=200&background=random&color=fff&bold=true`};function zs(){var y;const s=K(),m=se(),[d,k]=l.useState(!0),[n,u]=l.useState(null),[f,x]=l.useState(null),[D,_]=l.useState([]),[A,z]=l.useState(!0),[o,C]=l.useState("overview");l.useEffect(()=>{j()},[]),l.useEffect(()=>{const r=m.pathname,g=new URLSearchParams(m.search).get("tab");g==="search"?C("search"):r.includes("/company/management")?C("management"):r==="/company/dashboard"&&!g&&C("overview")},[m]);const j=async()=>{var r,v;try{z(!0);const[g,a]=await Promise.all([L.getMyCompany().catch(()=>null),L.getMyCompany().then(i=>L.getTeamMembers(i.id)).catch(()=>[])]);if(u(g),_(a||[]),g!=null&&g.id)try{const i=await te.getSubscription(g.id);x(i)}catch(i){((r=i.response)==null?void 0:r.status)===502||i.code==="ERR_NETWORK"||i.message==="Network Error"?(console.warn("Payment service unavailable (502 Bad Gateway). Subscription data will not be available."),x(null)):(console.error("Error loading subscription:",i),x(null))}}catch(g){if(console.error("Error loading data:",g),((v=g.response)==null?void 0:v.status)===404){s("/company/onboarding");return}}finally{z(!1)}},P=()=>{window.confirm("Êtes-vous sûr de vouloir vous déconnecter ?")&&(ae.logout(),s("/login"))};if(A)return e.jsx("div",{className:"min-h-screen bg-gray-light flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ue,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-[#226D68]"}),e.jsx("p",{className:"text-muted-foreground",children:"Chargement..."})]})});if(!n)return e.jsx("div",{className:"min-h-screen bg-gray-light flex items-center justify-center p-4",children:e.jsxs(S,{className:"w-full max-w-md rounded-[12px] shadow-lg",children:[e.jsxs(T,{children:[e.jsx(F,{children:"Aucune entreprise trouvée"}),e.jsx(G,{children:"Vous devez créer votre entreprise pour accéder au dashboard"})]}),e.jsx(M,{children:e.jsx(N,{onClick:()=>s("/company/onboarding"),className:"w-full bg-[#226D68] hover:bg-[#1a5a55]",children:"Créer mon entreprise"})})]})});const t=[{id:"overview",label:"Vue d'ensemble",icon:je},{id:"search",label:"Recherche candidats",icon:W},{id:"management",label:"Gestion",icon:O}],c=n.logo_url||U(n.name),h=D.filter(r=>r.status==="active"),b=o==="search"?!1:d;return e.jsxs("div",{className:"h-screen bg-gray-light flex overflow-hidden max-h-screen",children:[e.jsxs("aside",{className:`
        fixed lg:static inset-y-0 left-0 z-50
        bg-white border-r border-gray-200
        transition-all duration-300 ease-in-out
        ${b?"w-56 translate-x-0":"w-0 -translate-x-full lg:translate-x-0 lg:w-16"}
        flex flex-col
      `,children:[e.jsxs("div",{className:"h-12 border-b border-gray-200 flex items-center justify-between px-3",children:[b&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 bg-[#226D68] rounded-lg flex items-center justify-center",children:e.jsx(fe,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"font-bold text-sm text-gray-anthracite font-heading",children:"Yemma"})]}),e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>k(!d),className:"lg:hidden h-8 w-8",children:b?e.jsx(ge,{className:"w-4 h-4"}):e.jsx(be,{className:"w-4 h-4"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-2 space-y-0.5",children:t.map(r=>{const v=r.icon;return e.jsxs(N,{variant:o===r.id?"default":"ghost",className:"w-full justify-start h-9 text-sm px-2",onClick:()=>{C(r.id),r.id==="search"?s("/company/dashboard?tab=search"):r.id==="management"?s("/company/management"):s("/company/dashboard")},children:[e.jsx(v,{className:"w-3.5 h-3.5 mr-2"}),b&&e.jsx("span",{children:r.label})]},r.id)})}),e.jsxs("div",{className:"border-t border-gray-200 p-2 space-y-2",children:[b&&e.jsxs("div",{className:"flex items-center gap-2 p-1.5 rounded-lg hover:bg-gray-50 transition-colors mb-2",children:[e.jsx("img",{src:c,alt:n.name,className:"w-8 h-8 rounded-lg object-cover border border-gray-200",onError:r=>{r.target.src=U(n.name)}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium truncate text-gray-anthracite",children:n.name}),e.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[h.length," membre",h.length>1?"s":""]})]})]}),e.jsxs(N,{variant:"ghost",className:"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50 h-9 text-sm px-2",onClick:P,children:[e.jsx(ve,{className:"w-3.5 h-3.5 mr-2"}),b&&e.jsx("span",{children:"Déconnexion"})]})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>k(!1)}),e.jsx("main",{className:`flex-1 overflow-hidden bg-gray-50 ${o==="search"?"flex flex-col":""}`,children:o==="search"?e.jsx(Te,{}):e.jsxs("div",{className:"container mx-auto p-4 max-w-7xl overflow-y-auto h-full",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-[#226D68] to-[#1a5a55] bg-clip-text text-transparent",children:o==="overview"?"Vue d'ensemble":o==="search"?"Recherche Candidats":"Gestion"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:o==="overview"?`Bienvenue dans votre espace ${n.name}`:o==="search"?"Recherchez et découvrez des candidats validés":"Gérez votre équipe et vos paramètres"})]}),o==="overview"&&e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>s("/company/onboarding"),className:"h-8 px-2 text-xs",children:[e.jsx(O,{className:"w-3.5 h-3.5 mr-1"}),"Paramètres"]})]}),o==="overview"&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-3",children:[e.jsxs(S,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsx(T,{className:"pb-2 pt-3 px-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{className:"text-xs font-medium text-blue-900",children:"Membres actifs"}),e.jsx(Ne,{className:"h-4 w-4 text-blue-600"})]})}),e.jsxs(M,{className:"px-3 pb-3",children:[e.jsx("div",{className:"text-xl font-bold text-blue-900",children:h.length}),e.jsx("p",{className:"text-xs text-blue-700 mt-0.5",children:"Recruteurs"})]})]}),e.jsxs(S,{className:"bg-gradient-to-br from-[#E8F4F3] to-[#D1E9E7] border-[#B8DDD9]",children:[e.jsx(T,{className:"pb-2 pt-3 px-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{className:"text-xs font-medium text-[#1a5a55]",children:"Statut"}),e.jsx(ye,{className:"h-4 w-4 text-[#226D68]"})]})}),e.jsxs(M,{className:"px-3 pb-3",children:[e.jsx(B,{className:"mt-1 bg-[#226D68] text-white text-xs px-1.5 py-0 h-4",children:n.status==="ACTIVE"?"Actif":n.status}),e.jsx("p",{className:"text-xs text-[#1a5a55] mt-0.5",children:"Entreprise"})]})]}),e.jsxs(S,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:[e.jsx(T,{className:"pb-2 pt-3 px-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{className:"text-xs font-medium text-purple-900",children:"Abonnement"}),e.jsx(we,{className:"h-4 w-4 text-purple-600"})]})}),e.jsxs(M,{className:"px-3 pb-3",children:[e.jsx("div",{className:"text-sm font-bold text-purple-900 truncate",children:((y=f==null?void 0:f.plan)==null?void 0:y.name)||"Aucun"}),e.jsx("p",{className:"text-xs text-purple-700 mt-0.5",children:"Plan actuel"})]})]}),e.jsxs(S,{className:"bg-gradient-to-br from-[#FDF2F0] to-[#FBE5E0] border-[#F8D3CA]",children:[e.jsx(T,{className:"pb-2 pt-3 px-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{className:"text-xs font-medium text-[#c04a2f]",children:"Quota restant"}),e.jsx(_e,{className:"h-4 w-4 text-[#e76f51]"})]})}),e.jsxs(M,{className:"px-3 pb-3",children:[e.jsx("div",{className:"text-xl font-bold text-[#c04a2f]",children:(f==null?void 0:f.quota_remaining)!==void 0?f.quota_remaining:"∞"}),e.jsx("p",{className:"text-xs text-[#c04a2f] mt-0.5",children:"Consultations"})]})]})]})]}),o==="overview"?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mb-3",children:e.jsx(T,{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b py-2 px-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:c,alt:n.name,className:"w-12 h-12 rounded-lg object-cover border-2 border-[#226D68]/20",onError:r=>{r.target.src=U(n.name)}}),e.jsxs("div",{children:[e.jsx(F,{className:"text-sm font-semibold",children:n.name}),e.jsxs(G,{className:"text-xs mt-0.5",children:[n.adresse&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"w-3 h-3"}),n.adresse]}),n.legal_id&&e.jsxs("span",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Ce,{className:"w-3 h-3"}),"RCCM: ",n.legal_id]})]})]})]})})})}),e.jsxs(S,{className:"mb-3",children:[e.jsx(T,{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b py-2 px-3",children:e.jsxs(F,{className:"text-sm font-semibold flex items-center gap-1.5",children:[e.jsx(Se,{className:"w-4 h-4"}),"Actions rapides"]})}),e.jsx(M,{className:"p-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",className:"h-auto py-3 flex flex-col items-center gap-2 border-2 text-xs",onClick:()=>{C("search"),s("/company/dashboard?tab=search")},children:[e.jsx(W,{className:"w-5 h-5 text-[#226D68]"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-xs",children:"Rechercher candidats"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Accéder à la CVthèque"})]})]}),e.jsxs(N,{variant:"outline",size:"sm",className:"h-auto py-3 flex flex-col items-center gap-2 border-2 text-xs",onClick:()=>{C("management"),s("/company/management")},children:[e.jsx(ke,{className:"w-5 h-5 text-[#226D68]"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-xs",children:"Gérer l'équipe"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Inviter des recruteurs"})]})]}),e.jsxs(N,{variant:"outline",size:"sm",className:"h-auto py-3 flex flex-col items-center gap-2 border-2 text-xs",onClick:()=>s("/company/onboarding"),children:[e.jsx(O,{className:"w-5 h-5 text-[#226D68]"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-xs",children:"Paramètres"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Modifier l'entreprise"})]})]})]})})]})]}):o==="management"?e.jsx("div",{className:"mt-0",children:e.jsx(re,{})}):null]})})]})}export{zs as default};
