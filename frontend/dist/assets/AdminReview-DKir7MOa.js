import{j as e,r as x,o as Y,c as ce,q as de,u as xe,L as Q,f as M}from"./index-Cg1svvI5.js";import{C as w,d as S,b as k,a as A,c as ie}from"./card-zq6uNjQt.js";import{B as y}from"./badge-CBZW5moz.js";import{c as K,B as g}from"./button-wtSf44PI.js";import{S as ue}from"./scroll-area-Bi4_-Llk.js";import{F as W}from"./file-text-90F8CKqb.js";import{I as he}from"./image-DLPPg8Jg.js";import{D as le}from"./download-jDX2n7X7.js";import{u as pe,t as fe,o as je,s as ge,n as B}from"./types-BlmR3YhF.js";import{I as q}from"./input-j75cJiPX.js";import{L as V}from"./label-CXq0_ejY.js";import{T as ve}from"./textarea-8LaMF0_o.js";import{L as G}from"./loader-2-DrGK7uFY.js";import{X as Ne,S as be}from"./separator-BC02zGbZ.js";import{C as J}from"./check-circle-2-CXExqBjZ.js";import{T as _e,a as ye,b as ee,c as se}from"./tabs-DacRyiUI.js";import{A as we}from"./alert-circle-ExmS7pl5.js";import{R as ae}from"./refresh-cw-6zwt9GF_.js";import{A as ne}from"./arrow-left-B-1lI_0Z.js";import{C as Se}from"./chevron-right-GtJ0jKCU.js";import{S as $}from"./star-LF3yftrK.js";import{M as ke}from"./map-pin-BJfi5_gX.js";import{B as Ae}from"./briefcase-CLeWLoBs.js";import{M as Ee}from"./mail-BoptD6uC.js";import{P as Ce}from"./phone-Cc6lzcGm.js";import{T as Re}from"./trending-up-CCayYKWv.js";import{S as Te}from"./sparkles-Dyii787z.js";import{U as Le}from"./user-ILiqHJuw.js";import"./index-BktxQI8W.js";import"./index-C8kEvNwS.js";import"./index-B1yRHtUD.js";import"./index-BCrHabdb.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=K("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=K("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=K("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=K("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function De({data:t}){return t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(k,{children:"Profil Général"})}),e.jsx(A,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Prénom"}),e.jsx("p",{className:"text-sm font-medium",children:t.first_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Nom"}),e.jsx("p",{className:"text-sm font-medium",children:t.last_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date de naissance"}),e.jsx("p",{className:"text-sm",children:t.date_of_birth?new Date(t.date_of_birth).toLocaleDateString("fr-FR"):"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Nationalité"}),e.jsx("p",{className:"text-sm",children:t.nationality||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm",children:t.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Téléphone"}),e.jsx("p",{className:"text-sm",children:t.phone||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Adresse"}),e.jsx("p",{className:"text-sm",children:t.address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Ville"}),e.jsx("p",{className:"text-sm",children:t.city||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Pays"}),e.jsx("p",{className:"text-sm",children:t.country||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Titre du profil"}),e.jsx("p",{className:"text-sm font-medium",children:t.profile_title||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Résumé professionnel"}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.professional_summary||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Secteur"}),e.jsx("p",{className:"text-sm",children:t.sector||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Métier principal"}),e.jsx("p",{className:"text-sm",children:t.main_job||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Expérience totale"}),e.jsxs("p",{className:"text-sm",children:[t.total_experience||0," ans"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Statut"}),e.jsx(y,{variant:t.status==="VALIDATED"?"default":"secondary",children:t.status||"DRAFT"})]}),t.completion_percentage!==void 0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Complétion"}),e.jsxs("p",{className:"text-sm",children:[t.completion_percentage.toFixed(1),"%"]})]})]})})]}),t.experiences&&t.experiences.length>0&&e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(k,{children:"Expériences Professionnelles"})}),e.jsx(A,{className:"space-y-4",children:t.experiences.map((s,d)=>{const n=`https://ui-avatars.com/api/?name=${encodeURIComponent(s.company_name||"Company")}&size=100&background=random&color=fff&bold=true`,v=s.company_logo_url||n;return e.jsx("div",{className:"border rounded-lg p-4 space-y-3",children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:v,alt:s.company_name,className:"w-16 h-16 rounded-lg object-cover border-2 border-muted",onError:N=>{N.target.src!==n&&(N.target.src=n)}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:s.position}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.company_name}),s.company_sector&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.company_sector})]}),e.jsxs("div",{className:"text-sm text-muted-foreground text-right ml-4",children:[e.jsxs("p",{children:[new Date(s.start_date).toLocaleDateString("fr-FR")," - ",s.is_current?"En cours":s.end_date?new Date(s.end_date).toLocaleDateString("fr-FR"):"N/A"]}),s.contract_type&&e.jsx(y,{variant:"outline",className:"mt-1",children:s.contract_type})]})]}),s.description&&e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground block mb-1",children:"Description des missions:"}),e.jsx("div",{className:"text-sm rich-text-content",style:{lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:s.description}})]}),s.achievements&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground block mb-1",children:"Réalisations majeures:"}),e.jsx("div",{className:"text-sm rich-text-content",style:{lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:s.achievements}})]}),s.has_document&&e.jsx(y,{variant:"outline",className:"mt-2",children:"Document justificatif disponible"})]})]})},s.id||d)})})]}),t.educations&&t.educations.length>0&&e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(k,{children:"Formations & Diplômes"})}),e.jsx(A,{className:"space-y-3",children:t.educations.map((s,d)=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.diploma}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.institution}),s.country&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.country})]}),e.jsxs("div",{className:"text-sm text-muted-foreground text-right",children:[e.jsx("p",{children:s.graduation_year}),e.jsx(y,{variant:"outline",className:"mt-1",children:s.level})]})]})},s.id||d))})]}),t.certifications&&t.certifications.length>0&&e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(k,{children:"Certifications"})}),e.jsx(A,{className:"space-y-3",children:t.certifications.map((s,d)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.issuer," - ",s.year]}),s.verification_url&&e.jsx("a",{href:s.verification_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:"Vérifier"}),s.expiration_date&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Expire le: ",new Date(s.expiration_date).toLocaleDateString("fr-FR")]})]},s.id||d))})]}),t.skills&&t.skills.length>0&&e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(k,{children:"Compétences"})}),e.jsx(A,{className:"space-y-4",children:["TECHNICAL","SOFT","TOOL"].map(s=>{const d=t.skills.filter(n=>n.skill_type===s);return d.length===0?null:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:s==="TECHNICAL"?"Compétences techniques":s==="SOFT"?"Compétences comportementales":"Outils & Logiciels"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:d.map((n,v)=>e.jsxs(y,{variant:s==="TECHNICAL"?"secondary":"outline",children:[n.name,n.level&&` (${n.level})`,n.years_of_practice&&` - ${n.years_of_practice} ans`]},n.id||v))})]},s)})})]}),t.job_preferences&&e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(k,{children:"Recherche d'Emploi"})}),e.jsxs(A,{className:"space-y-3",children:[t.job_preferences.desired_positions&&t.job_preferences.desired_positions.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Postes recherchés"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.job_preferences.desired_positions.map((s,d)=>e.jsx(y,{children:s},d))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Type de contrat"}),e.jsx("p",{className:"text-sm",children:t.job_preferences.contract_type||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Localisation"}),e.jsx("p",{className:"text-sm",children:t.job_preferences.desired_location||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Disponibilité"}),e.jsx("p",{className:"text-sm",children:t.job_preferences.availability||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Prétentions salariales"}),e.jsx("p",{className:"text-sm",children:t.job_preferences.salary_expectations?`${t.job_preferences.salary_expectations} €/an`:"N/A"})]}),t.job_preferences.mobility&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Mobilité"}),e.jsx("p",{className:"text-sm",children:t.job_preferences.mobility})]}),t.job_preferences.target_sectors&&t.job_preferences.target_sectors.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Secteurs ciblés"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:t.job_preferences.target_sectors.map((s,d)=>e.jsx(y,{variant:"outline",children:s},d))})]})]})]})]})]}):e.jsx("div",{className:"text-muted-foreground",children:"Aucune donnée disponible"})}function Ue({documents:t,selectedDocument:s,onSelectDocument:d}){const[n,v]=x.useState(100),[N,_]=x.useState(0),R=()=>v(r=>Math.min(r+25,200)),T=()=>v(r=>Math.max(r-25,50)),D=()=>_(r=>(r+90)%360),E=t.filter(r=>{const b=r.documentType||r.document_type,h=r.mimeType||r.mime_type;return!(b==="PROFILE_PHOTO"||b==="COMPANY_LOGO"||(h==null?void 0:h.startsWith("image/"))&&b==="OTHER")}),O=r=>r!=null&&r.includes("pdf")?e.jsx(W,{className:"w-5 h-5"}):r!=null&&r.includes("image")?e.jsx(he,{className:"w-5 h-5"}):e.jsx(W,{className:"w-5 h-5"}),I=()=>{if(!s)return e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(W,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Sélectionnez un document pour le visualiser"})]})});const r=s.mimeType||s.mime_type,b=r==null?void 0:r.includes("pdf"),h=r==null?void 0:r.includes("image");return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"border-b p-2 flex items-center justify-between bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium truncate max-w-xs",children:s.originalFilename||s.original_filename}),e.jsx(y,{variant:"outline",children:s.documentType||s.document_type})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{variant:"ghost",size:"sm",onClick:T,disabled:n<=50,children:e.jsx(Pe,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm w-12 text-center",children:[n,"%"]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:R,disabled:n>=200,children:e.jsx(Ie,{className:"w-4 h-4"})}),h&&e.jsx(g,{variant:"ghost",size:"sm",onClick:D,children:e.jsx(Oe,{className:"w-4 h-4"})}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>{const c=document.createElement("a");c.href=s.viewUrl,c.download=s.originalFilename||s.original_filename||`document_${s.id}`,c.target="_blank",document.body.appendChild(c),c.click(),document.body.removeChild(c)},title:"Télécharger",children:e.jsx(le,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-muted/20 p-4 flex items-center justify-center",children:b?e.jsx("iframe",{src:s.viewUrl,className:"w-full h-full border rounded",style:{transform:`scale(${n/100})`}}):h?e.jsx("img",{src:s.viewUrl,alt:s.originalFilename,className:"max-w-full max-h-full object-contain",style:{transform:`scale(${n/100}) rotate(${N}deg)`,transition:"transform 0.2s"}}):e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx("p",{children:"Type de document non supporté"}),e.jsxs(g,{variant:"outline",className:"mt-4",onClick:()=>{const c=document.createElement("a");c.href=s.viewUrl,c.download=s.originalFilename||s.original_filename||`document_${s.id}`,c.target="_blank",document.body.appendChild(c),c.click(),document.body.removeChild(c)},children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Télécharger"]})]})})]})};return e.jsxs("div",{className:"h-full flex",children:[e.jsxs("div",{className:"w-64 border-r bg-muted/30 flex flex-col",children:[e.jsxs("div",{className:"p-3 border-b",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Documents disponibles"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[E.length," document(s)"]})]}),e.jsx(ue,{className:"flex-1",children:e.jsx("div",{className:"p-2 space-y-1",children:E.length===0?e.jsx("div",{className:"text-sm text-muted-foreground p-4 text-center",children:"Aucun document disponible"}):E.map(r=>e.jsx("button",{onClick:()=>d(r),className:`w-full text-left p-3 rounded-lg border transition-colors ${(s==null?void 0:s.id)===r.id?"bg-primary text-primary-foreground border-primary":"bg-background hover:bg-muted border-border"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[O(r.mimeType||r.mime_type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:r.originalFilename||r.original_filename}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:r.documentType||r.document_type}),e.jsxs("p",{className:"text-xs opacity-70",children:[r.fileSize?(r.fileSize/1024/1024).toFixed(2):r.file_size?(r.file_size/1024/1024).toFixed(2):"0"," MB"]})]})]})},r.id))})})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:I()})]})}const Ve=je({overallScore:B().min(0).max(5).step(.1,"La note doit être un multiple de 0.1"),technicalSkills:B().min(0).max(5).step(.1).optional(),softSkills:B().min(0).max(5).step(.1).optional(),communication:B().min(0).max(5).step(.1).optional(),motivation:B().min(0).max(5).step(.1).optional(),summary:ge().min(50,"Le résumé doit contenir au moins 50 caractères")});function $e({candidateId:t,candidateData:s,onSuccess:d}){const[n,v]=x.useState(!1),[N,_]=x.useState(null),[R,T]=x.useState(null),[D,E]=x.useState(!0),[O,I]=x.useState([]),[r,b]=x.useState(!1),h=pe({resolver:fe(Ve),defaultValues:{overallScore:0,technicalSkills:void 0,softSkills:void 0,communication:void 0,motivation:void 0,summary:""}}),{register:c,handleSubmit:P,formState:{errors:j},watch:L,setValue:te,reset:U}=h,H=L("overallScore"),o=L("summary");x.useEffect(()=>{t&&(async()=>{try{E(!0);const a=s==null?void 0:s.admin_report;if(a)U({overallScore:a.overall_score||0,technicalSkills:a.technical_skills_rating,softSkills:a.soft_skills_rating,communication:a.communication_rating,motivation:a.motivation_rating,summary:a.summary||""}),a.evaluation_history&&Array.isArray(a.evaluation_history)&&I(a.evaluation_history);else try{const p=await Y.getCandidateEvaluation(t);p&&U({overallScore:p.overall_score||0,technicalSkills:p.technical_skills_rating,softSkills:p.soft_skills_rating,communication:p.communication_rating,motivation:p.motivation_rating,summary:p.summary||""})}catch{console.log("Aucune évaluation existante pour ce candidat")}}catch(a){console.error("Erreur lors du chargement de l'évaluation:",a)}finally{E(!1)}})()},[t,s==null?void 0:s.admin_report]);const l=async i=>{var a,p,z;v(!0),T(null);try{const C=i.action||N;if(C==="validate"){const m=await Y.validateProfile(t,{overallScore:i.overallScore,technicalSkills:i.technicalSkills,softSkills:i.softSkills,communication:i.communication,motivation:i.motivation,summary:i.summary});d&&await d()}else if(C==="reject"){const m=await Y.rejectProfile(t,{rejectionReason:i.summary||"Non spécifié",overallScore:i.overallScore||null});d&&await d()}await new Promise(m=>setTimeout(m,500));try{const m=s==null?void 0:s.admin_report;if(m&&m.evaluation_history)I(m.evaluation_history);else{const u=await ce.getProfile(t);if((a=u==null?void 0:u.admin_report)!=null&&a.evaluation_history){I(u.admin_report.evaluation_history);const F=u.admin_report.evaluation_history[0];F&&U({overallScore:F.overall_score||i.overallScore||0,technicalSkills:F.technical_skills_rating||i.technicalSkills,softSkills:F.soft_skills_rating||i.softSkills,communication:F.communication_rating||i.communication,motivation:F.motivation_rating||i.motivation,summary:F.summary||i.summary||""})}}}catch(m){console.error("Erreur lors du rechargement de l'historique:",m)}_(null)}catch(C){console.error("Erreur lors de la soumission:",C),T(((z=(p=C.response)==null?void 0:p.data)==null?void 0:z.detail)||C.message||"Erreur lors de la soumission")}finally{v(!1)}};return D?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(G,{className:"h-6 w-6 animate-spin text-primary"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Chargement de l'évaluation..."})]}):e.jsxs("div",{className:"space-y-6",children:[O.length>0&&e.jsxs("div",{className:"border rounded-lg p-4 bg-muted/50",children:[e.jsxs(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>b(!r),className:"flex items-center gap-2 mb-2",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Historique des évaluations (",O.length,")"]}),r&&e.jsx("div",{className:"mt-4 space-y-3 max-h-64 overflow-y-auto",children:O.map((i,a)=>e.jsxs("div",{className:"border rounded p-3 bg-background text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-xs text-muted-foreground",children:i.updated_at?new Date(i.updated_at).toLocaleString("fr-FR"):"Date inconnue"}),i.status&&e.jsx("span",{className:`text-xs px-2 py-1 rounded ${i.status==="VALIDATED"?"bg-[#D1E9E7] text-[#1a5a55]":i.status==="REJECTED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:i.status})]}),i.overall_score!==void 0&&e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Note globale: "}),e.jsxs("span",{className:"font-medium",children:[i.overall_score,"/5"]})]}),i.summary&&e.jsxs("div",{className:"mt-2 text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Résumé: "}),e.jsx("span",{children:i.summary})]})]},a))})]}),e.jsxs("form",{onSubmit:P(l),className:"space-y-6",children:[R&&e.jsx("div",{className:"bg-destructive/10 border border-destructive rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-destructive",children:R})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(V,{htmlFor:"overallScore",children:["Note Globale ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(q,{id:"overallScore",type:"number",min:"0",max:"5",step:"0.1",className:"w-32",...c("overallScore",{valueAsNumber:!0})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-3 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${H/5*100}%`}})}),e.jsx("span",{className:"text-sm text-muted-foreground w-12 text-right",children:"/5"})]})})]}),j.overallScore&&e.jsx("p",{className:"text-sm text-destructive",children:j.overallScore.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"technicalSkills",children:"Compétences techniques"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(q,{id:"technicalSkills",type:"number",min:"0",max:"5",step:"0.1",className:"w-32",...c("technicalSkills",{valueAsNumber:!0})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"/5"})]}),j.technicalSkills&&e.jsx("p",{className:"text-sm text-destructive",children:j.technicalSkills.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"softSkills",children:"Compétences comportementales"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(q,{id:"softSkills",type:"number",min:"0",max:"5",step:"0.1",className:"w-32",...c("softSkills",{valueAsNumber:!0})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"/5"})]}),j.softSkills&&e.jsx("p",{className:"text-sm text-destructive",children:j.softSkills.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"communication",children:"Communication"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(q,{id:"communication",type:"number",min:"0",max:"5",step:"0.1",className:"w-32",...c("communication",{valueAsNumber:!0})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"/5"})]}),j.communication&&e.jsx("p",{className:"text-sm text-destructive",children:j.communication.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"motivation",children:"Motivation"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(q,{id:"motivation",type:"number",min:"0",max:"5",step:"0.1",className:"w-32",...c("motivation",{valueAsNumber:!0})}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"/5"})]}),j.motivation&&e.jsx("p",{className:"text-sm text-destructive",children:j.motivation.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(V,{htmlFor:"summary",children:["Résumé de l'évaluation ",e.jsx("span",{className:"text-destructive",children:"*"}),e.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"(minimum 50 caractères)"})]}),e.jsx(ve,{id:"summary",rows:6,placeholder:"Rédigez un résumé détaillé de l'évaluation du candidat (minimum 50 caractères)...",...c("summary"),className:"resize-none"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:j.summary&&e.jsx("p",{className:"text-sm text-destructive",children:j.summary.message})}),e.jsxs("p",{className:`text-xs ${((o==null?void 0:o.length)||0)<50?"text-muted-foreground":"text-[#226D68]"}`,children:[(o==null?void 0:o.length)||0," / 50 caractères minimum"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>{_(null),h.reset(),T(null)},disabled:n,children:"Annuler"}),e.jsx(g,{type:"button",variant:"destructive",onClick:async()=>{if(_("reject"),await h.trigger()){const a=h.getValues();await l({...a,action:"reject"})}},disabled:n,children:n&&N==="reject"?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4 mr-2 animate-spin"}),"Rejet en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Rejeter"]})}),e.jsx(g,{type:"submit",onClick:()=>_("validate"),disabled:n||!H||((o==null?void 0:o.length)||0)<50,children:n&&N==="validate"?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4 mr-2 animate-spin"}),"Validation en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"VALIDER"]})})]})]})]})}const He=(t,s)=>{const d=`${(t==null?void 0:t[0])||""}${(s==null?void 0:s[0])||""}`.toUpperCase()||"U";return`https://ui-avatars.com/api/?name=${encodeURIComponent(d)}&size=200&background=random&color=fff&bold=true`},oe={DRAFT:"bg-gray-100 text-gray-800 border-gray-200",SUBMITTED:"bg-blue-100 text-blue-800 border-blue-200",IN_REVIEW:"bg-yellow-100 text-yellow-800 border-yellow-200",VALIDATED:"bg-[#D1E9E7] text-[#1a5a55] border-[#B8DDD9]",REJECTED:"bg-red-100 text-red-800 border-red-200",ARCHIVED:"bg-gray-100 text-gray-800 border-gray-200"},ze={DRAFT:"Brouillon",SUBMITTED:"Soumis",IN_REVIEW:"En cours de validation",VALIDATED:"Validé",REJECTED:"Rejeté",ARCHIVED:"Archivé"};function _s(){const{candidateId:t}=de();xe();const[s,d]=x.useState(null),[n,v]=x.useState([]),[N,_]=x.useState(null),[R,T]=x.useState(!0),[D,E]=x.useState(null),[O,I]=x.useState(0),[r,b]=x.useState(!1),[h,c]=x.useState(null),P=async()=>{var o,l,i,a,p,z,C;try{T(!0),E(null);const m=await ce.getProfile(t);console.log("AdminReview: Profile loaded:",m),console.log("AdminReview: Admin report present:",!!m.admin_report,m.admin_report),d(m);try{const Z=(await M.getCandidateDocuments(t)).filter(f=>!f.deleted_at).filter(f=>{var re;if(f.document_type==="PROFILE_PHOTO"||f.document_type==="COMPANY_LOGO")return!1;const X=(re=f.mime_type)==null?void 0:re.startsWith("image/"),me=f.document_type==="OTHER";return!(X&&me)}).map(f=>{const X=M.getDocumentServeUrl(f.id);return{...f,viewUrl:X,originalFilename:f.original_filename,mimeType:f.mime_type,documentType:f.document_type,fileSize:f.file_size}});v(Z),Z.length>0?(!N||!Z.find(f=>f.id===N.id))&&_(Z[0]):_(null)}catch(u){console.warn("Erreur lors du chargement des documents (non bloquant):",u),v([]),_(null)}}catch(m){console.error("Error fetching candidate data:",m);let u="Erreur lors du chargement des données du candidat";m.code==="ERR_NETWORK"||m.message==="Network Error"?u="Erreur réseau : Impossible de se connecter au serveur.":((o=m.response)==null?void 0:o.status)===401?u="Non autorisé : Votre session a expiré. Veuillez vous reconnecter.":((l=m.response)==null?void 0:l.status)===403?u="Accès refusé : Vous n'avez pas les permissions nécessaires.":((i=m.response)==null?void 0:i.status)===404?u=`Profil non trouvé : Aucun profil trouvé avec l'ID ${t}.`:((a=m.response)==null?void 0:a.status)===502||((p=m.response)==null?void 0:p.status)===503?u="Service indisponible : Le service candidate n'est pas accessible.":(C=(z=m.response)==null?void 0:z.data)!=null&&C.detail?u=m.response.data.detail:m.message&&(u=m.message),E(u)}finally{T(!1)}};x.useEffect(()=>{t&&P()},[t,O]),x.useEffect(()=>{(async()=>{if(!(s!=null&&s.id)){c(null);return}if(s.photo_url){let l=s.photo_url;if(console.log("AdminReview: Processing photo_url from profile:",l),l&&l.startsWith("/")){const i=l.match(/\/api\/v1\/documents\/serve\/(\d+)/);if(i&&i[1]){const a=parseInt(i[1]);l=M.getDocumentServeUrl(a),console.log("AdminReview: Converted relative URL to full URL:",l,"Document ID:",a)}}if(l&&!l.includes("ui-avatars.com")&&l.trim()!==""){console.log("AdminReview: Setting photo URL from profile.photo_url:",l),c(l),b(!1);return}}console.log("AdminReview: photo_url not found or invalid, searching for PROFILE_PHOTO document...");try{const i=(await M.getCandidateDocuments(s.id)).filter(a=>(a.document_type==="PROFILE_PHOTO"||a.document_type==="OTHER")&&!a.deleted_at).sort((a,p)=>new Date(p.created_at)-new Date(a.created_at))[0];if(i){const a=M.getDocumentServeUrl(i.id);console.log("AdminReview: Found PROFILE_PHOTO document, using serve URL:",a),c(a),b(!1)}else console.log("AdminReview: No PROFILE_PHOTO document found"),c(null)}catch(l){console.error("AdminReview: Error loading photo document:",l),c(null)}})()},[s==null?void 0:s.id,s==null?void 0:s.photo_url]);const j=async()=>{await new Promise(o=>setTimeout(o,1e3)),await P(),I(o=>o+1)};if(R)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(G,{className:"w-8 h-8 animate-spin text-primary"})});if(D)return e.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:e.jsx("div",{className:"container mx-auto max-w-2xl",children:e.jsxs(w,{className:"border-destructive",children:[e.jsx(S,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-destructive"}),e.jsx(k,{className:"text-destructive",children:"Erreur de chargement"})]})}),e.jsxs(A,{className:"space-y-4",children:[e.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-md p-4",children:e.jsx("p",{className:"text-sm text-destructive",children:D})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(g,{variant:"outline",onClick:()=>P(),children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Réessayer"]}),e.jsx(Q,{to:"/admin/dashboard",children:e.jsxs(g,{variant:"outline",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Retour au dashboard"]})})]})]})]})})});const L=s?He(s.first_name,s.last_name):"",te=h&&!r&&!h.includes("ui-avatars.com")?h:L,U=s?`${s.first_name||""} ${s.last_name||""}`.trim()||"Candidat":"Chargement...",H=s?[s.city,s.country].filter(Boolean).join(", "):"";return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b sticky top-0 z-20 shadow-sm",children:e.jsx("div",{className:"container mx-auto px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{to:"/admin/dashboard",children:e.jsxs(g,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs",children:[e.jsx(ne,{className:"w-3.5 h-3.5 mr-1"}),"Retour"]})}),e.jsx(be,{orientation:"vertical",className:"h-4"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx(Q,{to:"/admin/dashboard",className:"hover:text-primary",children:"Dashboard"}),e.jsx(Se,{className:"w-3 h-3 inline mx-1"}),e.jsxs("span",{children:["Validation #",t]})]}),s&&e.jsx(y,{className:`${oe[s.status]||oe.DRAFT} ml-auto text-xs px-2 py-0.5`,children:ze[s.status]||s.status}),e.jsxs(g,{variant:"ghost",size:"sm",onClick:()=>P(),className:"h-8 px-2 text-xs",disabled:R,children:[e.jsx(ae,{className:`w-3.5 h-3.5 mr-1 ${R?"animate-spin":""}`}),"Actualiser"]})]})})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 relative",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:te,alt:U,className:"w-24 h-24 rounded-full object-cover border-4 border-white/30 shadow-xl",onError:o=>{!r&&o.target.src!==L?(b(!0),o.target.src=L):o.target.src!==L&&(o.target.src=L)},onLoad:()=>{r&&h&&b(!1)}}),(s==null?void 0:s.status)==="VALIDATED"&&(s==null?void 0:s.is_verified)&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-white rounded-full p-1 shadow-lg z-10",children:e.jsx(J,{className:"h-4 w-4 text-[#226D68]"})}),(s==null?void 0:s.admin_score)&&e.jsxs("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-[#e76f51] text-white rounded-full px-2.5 py-1 shadow-xl flex items-center gap-1 border-2 border-white z-10",children:[e.jsx($,{className:"h-3 w-3 fill-current"}),e.jsxs("span",{className:"text-xs font-bold whitespace-nowrap",children:[s.admin_score.toFixed(1),"/5"]})]})]})}),e.jsxs("div",{className:"flex-1 text-white min-w-0",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1 truncate",children:U}),(s==null?void 0:s.profile_title)&&e.jsx("p",{className:"text-base text-white/90 mb-3 font-medium truncate",children:s.profile_title}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[H&&e.jsxs("div",{className:"flex items-center gap-1.5 text-white/80",children:[e.jsx(ke,{className:"h-3.5 w-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:H})]}),(s==null?void 0:s.total_experience)!==void 0&&e.jsxs("div",{className:"flex items-center gap-1.5 text-white/80",children:[e.jsx(Ae,{className:"h-3.5 w-3.5 flex-shrink-0"}),e.jsxs("span",{children:[s.total_experience," an",s.total_experience>1?"s":""]})]}),(s==null?void 0:s.email)&&e.jsxs("div",{className:"flex items-center gap-1.5 text-white/80",children:[e.jsx(Ee,{className:"h-3.5 w-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.email})]}),(s==null?void 0:s.phone)&&e.jsxs("div",{className:"flex items-center gap-1.5 text-white/80",children:[e.jsx(Ce,{className:"h-3.5 w-3.5 flex-shrink-0"}),e.jsx("span",{children:s.phone})]}),(s==null?void 0:s.completion_percentage)!==void 0&&e.jsxs("div",{className:"flex items-center gap-1.5 text-white/80",children:[e.jsx(Re,{className:"h-3.5 w-3.5 flex-shrink-0"}),e.jsxs("span",{children:[s.completion_percentage.toFixed(0),"% complété"]})]})]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[(s==null?void 0:s.admin_report)&&Object.keys(s.admin_report).length>0&&e.jsxs(w,{className:"mb-4 sm:mb-6 border-l-4 border-l-[#226D68] shadow-lg bg-gradient-to-r from-white to-[#226D68]/5",children:[e.jsx(S,{className:"pb-3 sm:pb-4 p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-[#226D68]/10 rounded-lg flex-shrink-0",children:e.jsx(Te,{className:"h-5 w-5 sm:h-6 sm:w-6 text-[#226D68]"})}),e.jsxs("div",{children:[e.jsx(k,{className:"text-xl sm:text-2xl font-bold text-gray-anthracite",children:"Avis de l'Expert"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Évaluation professionnelle du profil"})]})]})}),e.jsxs(A,{className:"pt-0 p-4 sm:p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-4 sm:mb-6",children:[s.admin_report.overall_score!==void 0&&e.jsxs("div",{className:"bg-gradient-to-br from-[#226D68]/10 to-[#226D68]/5 rounded-lg p-4 border border-[#226D68]/20",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2 font-medium",children:"Note globale"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((o,l)=>e.jsx($,{className:`h-5 w-5 ${l<Math.round(s.admin_report.overall_score)?"text-yellow-500 fill-current":"text-gray-300"}`},l))}),e.jsxs("span",{className:"ml-2 font-bold text-xl text-gray-anthracite",children:[s.admin_report.overall_score.toFixed(1),"/5"]})]})]}),s.admin_report.technical_skills_rating!==void 0&&e.jsxs("div",{className:"bg-blue-deep/5 rounded-lg p-4 border border-blue-deep/20",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2 font-medium",children:"Compétences techniques"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((o,l)=>e.jsx($,{className:`h-5 w-5 ${l<s.admin_report.technical_skills_rating?"text-yellow-500 fill-current":"text-gray-300"}`},l))}),e.jsxs("span",{className:"ml-2 font-bold text-lg text-gray-anthracite",children:[s.admin_report.technical_skills_rating,"/5"]})]})]}),s.admin_report.soft_skills_rating!==void 0&&e.jsxs("div",{className:"bg-blue-deep/5 rounded-lg p-4 border border-blue-deep/20",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2 font-medium",children:"Compétences comportementales"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((o,l)=>e.jsx($,{className:`h-5 w-5 ${l<s.admin_report.soft_skills_rating?"text-yellow-500 fill-current":"text-gray-300"}`},l))}),e.jsxs("span",{className:"ml-2 font-bold text-lg text-gray-anthracite",children:[s.admin_report.soft_skills_rating,"/5"]})]})]}),s.admin_report.communication_rating!==void 0&&e.jsxs("div",{className:"bg-blue-deep/5 rounded-lg p-4 border border-blue-deep/20",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2 font-medium",children:"Communication"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((o,l)=>e.jsx($,{className:`h-5 w-5 ${l<s.admin_report.communication_rating?"text-yellow-500 fill-current":"text-gray-300"}`},l))}),e.jsxs("span",{className:"ml-2 font-bold text-lg text-gray-anthracite",children:[s.admin_report.communication_rating,"/5"]})]})]}),s.admin_report.motivation_rating!==void 0&&e.jsxs("div",{className:"bg-blue-deep/5 rounded-lg p-4 border border-blue-deep/20",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2 font-medium",children:"Motivation"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((o,l)=>e.jsx($,{className:`h-5 w-5 ${l<s.admin_report.motivation_rating?"text-yellow-500 fill-current":"text-gray-300"}`},l))}),e.jsxs("span",{className:"ml-2 font-bold text-lg text-gray-anthracite",children:[s.admin_report.motivation_rating,"/5"]})]})]})]}),s.admin_report.soft_skills_tags&&s.admin_report.soft_skills_tags.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Tags de compétences comportementales"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.admin_report.soft_skills_tags.map((o,l)=>e.jsx(y,{variant:"secondary",className:"bg-[#226D68]/10 text-[#226D68] border-[#226D68]/20",children:o},l))})]}),s.admin_report.summary&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-anthracite mb-2",children:"Résumé de l'évaluation"}),e.jsx("p",{className:"text-foreground whitespace-pre-wrap leading-relaxed",children:s.admin_report.summary})]}),(s.admin_report.interview_notes||s.admin_report.recommendations)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6 pt-6 border-t border-border",children:[s.admin_report.interview_notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-anthracite mb-2",children:"Notes d'entretien"}),e.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap leading-relaxed",children:s.admin_report.interview_notes})]}),s.admin_report.recommendations&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-anthracite mb-2",children:"Recommandations"}),e.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap leading-relaxed",children:s.admin_report.recommendations})]})]})]})]}),e.jsxs(_e,{defaultValue:"profile",className:"w-full",children:[e.jsxs(ye,{className:"bg-white mb-3 h-9",children:[e.jsxs(ee,{value:"profile",className:"text-xs px-3 data-[state=active]:bg-blue-600 data-[state=active]:text-white",children:[e.jsx(Le,{className:"w-3.5 h-3.5 mr-1.5"}),"Profil"]}),e.jsxs(ee,{value:"documents",className:"text-xs px-3 data-[state=active]:bg-blue-600 data-[state=active]:text-white",children:[e.jsx(W,{className:"w-3.5 h-3.5 mr-1.5"}),"Documents (",n.length,")"]}),e.jsxs(ee,{value:"evaluation",className:"text-xs px-3 data-[state=active]:bg-blue-600 data-[state=active]:text-white",children:[e.jsx(J,{className:"w-3.5 h-3.5 mr-1.5"}),"Évaluation"]})]}),e.jsx(se,{value:"profile",className:"mt-3 space-y-3",children:e.jsx(De,{data:s})}),e.jsx(se,{value:"documents",className:"mt-3",children:e.jsxs(w,{className:"shadow-md min-h-[400px]",children:[e.jsxs(S,{className:"py-2 px-3 bg-gradient-to-r from-purple-50 to-purple-100/50 border-b",children:[e.jsxs(k,{className:"text-sm flex items-center gap-1.5 text-purple-900",children:[e.jsx(W,{className:"w-4 h-4"}),"Documents du Candidat"]}),e.jsx(ie,{className:"text-xs mt-0.5 text-purple-700",children:n.length>0?`${n.length} document(s) disponible(s)`:"Aucun document disponible"})]}),e.jsx(A,{className:"p-0",children:e.jsx("div",{className:"h-[400px]",children:e.jsx(Ue,{documents:n,selectedDocument:N,onSelectDocument:_})})})]})}),e.jsx(se,{value:"evaluation",className:"mt-3",children:e.jsxs(w,{className:"shadow-md border-l-4 border-l-[#226D68]",children:[e.jsxs(S,{className:"py-2 px-3 bg-gradient-to-r from-[#E8F4F3] to-[#D1E9E7]/50 border-b border-[#B8DDD9]",children:[e.jsxs(k,{className:"text-sm flex items-center gap-1.5 text-[#1a5a55]",children:[e.jsx(J,{className:"w-4 h-4"}),"Grille d'Évaluation et Validation"]}),e.jsx(ie,{className:"text-xs mt-0.5 text-[#1a5a55]",children:"Remplissez cette grille pour valider ou rejeter le profil"})]}),e.jsx(A,{className:"p-3",children:e.jsx($e,{candidateId:t,candidateData:s,onSuccess:j})})]})})]})]})]})}export{_s as default};
